# ä¸€ã€[JavaScript]() 

## 1. åŸå§‹å€¼å’Œå¼•ç”¨å€¼ç±»å‹åŠåŒºåˆ« 

### å˜é‡å­˜æ”¾ç±»å‹åŒºåˆ«ï¼š



| ç±»å‹   | åŒ…æ‹¬                                        | å˜é‡å­˜å‚¨   |      |
| ------ | ------------------------------------------- | ---------- | ---- |
| åŸå§‹å€¼ | Number,String,Null,Boolean,Undefined,Symbol | å­˜å‚¨åœ¨æ ˆä¸­ |      |
| å¼•ç”¨å€¼ | Array,Object,Function,Date,RegExp           | å­˜å‚¨åœ¨å †ä¸­ |      |



### é€šè¿‡å®ä¾‹å…·ä½“äº†è§£

- åŸå§‹å€¼çš„å˜é‡ç±»å‹å’Œå€¼éƒ½å­˜å‚¨åœ¨æ ˆä¸­ï¼Œæ ˆå†…å­˜å’Œæ ˆå†…å­˜ä¹‹é—´çš„èµ‹å€¼æ˜¯æ‹·è´ã€‚ä¸¤ä¸ªåŸå§‹å€¼ä¹‹é—´ä¸å½±å“ã€‚

```
<script type="text/javascript">
  var num = 10;
  var num1 = num; 
  num = 20;
  document.write(num1);//10
</script>
å¤åˆ¶ä»£ç 
```

num1 = num,æŠŠnumç©ºé—´çš„å€¼å¤åˆ¶åˆ°num1ã€‚

![img](https://user-gold-cdn.xitu.io/2019/11/22/16e9098d30227946?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

åŸå§‹å€¼çš„ç‰¹ç‚¹æ˜¯ä¸å¯æ”¹å˜ï¼Œä¸€å¼€å§‹num = 10,å½“é‡æ–°èµ‹å€¼ num = 20æ—¶ï¼Œä¸èƒ½åœ¨åŸæ¥çš„åœ°å€ä¸Šæ”¹å˜å€¼ï¼Œè€Œæ˜¯é‡æ–°å¼€è¾Ÿä¸€ä¸ªç©ºé—´ã€‚

![img](https://user-gold-cdn.xitu.io/2019/11/22/16e909a4bced2c7c?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



- å¼•ç”¨å€¼çš„å˜é‡ç±»å‹å­˜å‚¨åœ¨æ ˆä¸­ï¼Œå€¼åœ¨å †ä¸­ã€‚å½“arrèµ‹å€¼ç»™arr1æ—¶ï¼Œåœ¨æ ˆä¸­æ‹·è´åœ°å€ï¼Œç„¶åæ ¹æ®åœ°å€æŒ‡å‘å †ä¸­å†…å®¹ã€‚

```
<script type="text/javascript">
   var arr = [1,2];
   var arr1 = arr;
   arr.push(3);
   document.write(arr);//1,2,3
   document.write(arr1);//1,2,3
</script>
å¤åˆ¶ä»£ç 
```



![img](https://user-gold-cdn.xitu.io/2019/11/22/16e9087f50c939b0?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



- å¼•ç”¨å€¼é‡æ–°èµ‹å€¼ï¼Œæ˜¯æ–°å¼€è¾Ÿä¸€ä¸ªç©ºé—´ï¼ŒæŒ‡å‘æ–°çš„åœ°å€ã€‚æ‰€ä»¥åŸæ¥çš„arr1ä¸ä¼šéšç€arrçš„æ”¹å˜è€Œæ”¹å˜ã€‚æ­¤æ—¶å„è‡ªæŒ‡å‘çš„åœ°å€å·²ç»ä¸ä¸€æ ·äº†ã€‚

```
<script type="text/javascript">
   var arr = [1,2];
   var arr1 = arr;
   arr = [1,2,3];
   document.write(arr);//1,2,3
   document.write(arr1);//1,2
</script>
å¤åˆ¶ä»£ç 
```



![img](https://user-gold-cdn.xitu.io/2019/11/22/16e908f881db404e?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)







##  2. åˆ¤æ–­æ•°æ®ç±»å‹typeofã€instanceofã€Object.prototype.toString.call()ã€constructor 

### [è¯­æ³•](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/typeof#è¯­æ³•)

`typeof` è¿ç®—ç¬¦åæ¥æ“ä½œæ•°ï¼š

```
typeof operand
typeof(operand)
```

### [å‚æ•°](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/typeof#å‚æ•°)

**`operand`**



### [æè¿°](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/typeof#æè¿°)

ä¸‹è¡¨æ€»ç»“äº† `typeof` å¯èƒ½çš„è¿”å›å€¼ã€‚æœ‰å…³ç±»å‹å’ŒåŸå§‹å€¼çš„æ›´å¤šä¿¡æ¯ï¼Œå¯æŸ¥çœ‹ [JavaScript æ•°æ®ç»“æ„](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Data_structures) é¡µé¢ã€‚

| ç±»å‹                                                         | ç»“æœ                                                         |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| [Undefined](https://developer.mozilla.org/zh-CN/docs/Glossary/undefined) | `"undefined"`                                                |
| [Null](https://developer.mozilla.org/zh-CN/docs/Glossary/Null) | `"object"` (è§[ä¸‹æ–‡](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/typeof#null)) |
| [Boolean](https://developer.mozilla.org/zh-CN/docs/Glossary/Boolean) | `"boolean"`                                                  |
| [Number](https://developer.mozilla.org/zh-CN/docs/Glossary/Number) | `"number"`                                                   |
| [BigInt](https://developer.mozilla.org/zh-CN/docs/Glossary/BigInt)(ECMAScript 2020 æ–°å¢) | `"bigint"`                                                   |
| [String](https://developer.mozilla.org/zh-CN/docs/Glossary/String) | `"string"`                                                   |
| [Symbol](https://developer.mozilla.org/zh-CN/docs/Glossary/Symbol) (ECMAScript 2015 æ–°å¢) | `"symbol"`                                                   |
| å®¿ä¸»å¯¹è±¡ï¼ˆç”± JS ç¯å¢ƒæä¾›ï¼‰                                   | *å–å†³äºå…·ä½“å®ç°*                                             |
| [Function](https://developer.mozilla.org/zh-CN/docs/Glossary/Function) å¯¹è±¡ (æŒ‰ç…§ ECMA-262 è§„èŒƒå®ç° [[Call]]) | `"function"`                                                 |
| å…¶ä»–ä»»ä½•å¯¹è±¡                                                 | `"object"`                                                   |

### [ç¤ºä¾‹](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/typeof#ç¤ºä¾‹)

```
// æ•°å€¼
typeof 37 === 'number';
typeof 3.14 === 'number';
typeof(42) === 'number';
typeof Math.LN2 === 'number';
typeof Infinity === 'number';
typeof NaN === 'number'; // å°½ç®¡å®ƒæ˜¯ "Not-A-Number" (éæ•°å€¼) çš„ç¼©å†™
typeof Number(1) === 'number'; // Number ä¼šå°è¯•æŠŠå‚æ•°è§£ææˆæ•°å€¼

typeof 42n === 'bigint';


// å­—ç¬¦ä¸²
typeof '' === 'string';
typeof 'bla' === 'string';
typeof `template literal` === 'string';
typeof '1' === 'string'; // æ³¨æ„å†…å®¹ä¸ºæ•°å­—çš„å­—ç¬¦ä¸²ä»æ˜¯å­—ç¬¦ä¸²
typeof (typeof 1) === 'string'; // typeof æ€»æ˜¯è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²
typeof String(1) === 'string'; // String å°†ä»»æ„å€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œæ¯” toString æ›´å®‰å…¨


// å¸ƒå°”å€¼
typeof true === 'boolean';
typeof false === 'boolean';
typeof Boolean(1) === 'boolean'; // Boolean() ä¼šåŸºäºå‚æ•°æ˜¯çœŸå€¼è¿˜æ˜¯è™šå€¼è¿›è¡Œè½¬æ¢
typeof !!(1) === 'boolean'; // ä¸¤æ¬¡è°ƒç”¨ ! (é€»è¾‘é) æ“ä½œç¬¦ç›¸å½“äº Boolean()


// Symbols
typeof Symbol() === 'symbol';
typeof Symbol('foo') === 'symbol';
typeof Symbol.iterator === 'symbol';


// Undefined
typeof undefined === 'undefined';
typeof declaredButUndefinedVariable === 'undefined';
typeof undeclaredVariable === 'undefined';


// å¯¹è±¡
typeof {a: 1} === 'object';

// ä½¿ç”¨ Array.isArray æˆ–è€… Object.prototype.toString.call
// åŒºåˆ†æ•°ç»„å’Œæ™®é€šå¯¹è±¡
typeof [1, 2, 4] === 'object';

typeof new Date() === 'object';
typeof /regex/ === 'object'; // å†å²ç»“æœè¯·å‚é˜…æ­£åˆ™è¡¨è¾¾å¼éƒ¨åˆ†


// ä¸‹é¢çš„ä¾‹å­ä»¤äººè¿·æƒ‘ï¼Œéå¸¸å±é™©ï¼Œæ²¡æœ‰ç”¨å¤„ã€‚é¿å…ä½¿ç”¨å®ƒä»¬ã€‚
typeof new Boolean(true) === 'object';
typeof new Number(1) === 'object';
typeof new String('abc') === 'object';

// å‡½æ•°
typeof function() {} === 'function';
typeof class C {} === 'function'
typeof Math.sin === 'function';


```

### [`typeof null`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/typeof#typeof_null)

```
// JavaScript è¯ç”Ÿä»¥æ¥ä¾¿å¦‚æ­¤
typeof null === 'object';
```

åœ¨ JavaScript æœ€åˆçš„å®ç°ä¸­ï¼ŒJavaScript ä¸­çš„å€¼æ˜¯ç”±ä¸€ä¸ªè¡¨ç¤ºç±»å‹çš„æ ‡ç­¾å’Œå®é™…æ•°æ®å€¼è¡¨ç¤ºçš„ã€‚å¯¹è±¡çš„ç±»å‹æ ‡ç­¾æ˜¯ 0ã€‚ç”±äº `null` ä»£è¡¨çš„æ˜¯ç©ºæŒ‡é’ˆï¼ˆå¤§å¤šæ•°å¹³å°ä¸‹å€¼ä¸º 0x00ï¼‰ï¼Œå› æ­¤ï¼Œnull çš„ç±»å‹æ ‡ç­¾æ˜¯ 0ï¼Œ`typeof null` ä¹Ÿå› æ­¤è¿”å› `"object"`ã€‚ï¼ˆ[å‚è€ƒæ¥æº](https://www.2ality.com/2013/10/typeof-null.html)ï¼‰

æ›¾æœ‰ä¸€ä¸ª ECMAScript çš„ä¿®å¤ææ¡ˆï¼ˆé€šè¿‡é€‰æ‹©æ€§åŠ å…¥çš„æ–¹å¼ï¼‰ï¼Œä½†[è¢«æ‹’ç»äº†](http://wiki.ecmascript.org/doku.php?id=harmony:typeof_null)ã€‚è¯¥ææ¡ˆä¼šå¯¼è‡´ `typeof null === 'null'`ã€‚

å…¶å®ï¼Œjs åœ¨åº•å±‚å­˜å‚¨å˜é‡çš„æ—¶å€™ï¼Œä¼šåœ¨å˜é‡çš„æœºå™¨ç çš„ä½ä½1-3ä½å­˜å‚¨å…¶ç±»å‹ä¿¡æ¯ğŸ‘‰

- 000ï¼šå¯¹è±¡
- 010ï¼šæµ®ç‚¹æ•°
- 100ï¼šå­—ç¬¦ä¸²
- 110ï¼šå¸ƒå°”
- 1ï¼šæ•´æ•°

but, å¯¹äº `undefined` å’Œ `null` æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªå€¼çš„ä¿¡æ¯å­˜å‚¨æ˜¯æœ‰ç‚¹ç‰¹æ®Šçš„ã€‚

`null`ï¼šæ‰€æœ‰æœºå™¨ç å‡ä¸º0

### instanceof æ“ä½œç¬¦çš„å®ç°åŸç†

ä¹‹å‰æˆ‘ä»¬æåˆ°äº† `instanceof` æ¥åˆ¤æ–­å¯¹è±¡çš„å…·ä½“ç±»å‹ï¼Œå…¶å® `instanceof` ä¸»è¦çš„ä½œç”¨å°±æ˜¯åˆ¤æ–­ä¸€ä¸ªå®ä¾‹æ˜¯å¦å±äºæŸç§ç±»å‹

```
let person = function () {
}
let nicole = new person()
nicole instanceof person // true
å¤åˆ¶ä»£ç 
```

å½“ç„¶ï¼Œ`instanceof` ä¹Ÿå¯ä»¥åˆ¤æ–­ä¸€ä¸ªå®ä¾‹æ˜¯å¦æ˜¯å…¶çˆ¶ç±»å‹æˆ–è€…ç¥–å…ˆç±»å‹çš„å®ä¾‹ã€‚

```
let person = function () {
}
let programmer = function () {
}
programmer.prototype = new person()
let nicole = new programmer()
nicole instanceof person // true
nicole instanceof programmer // true
å¤åˆ¶ä»£ç 
```

è¿™æ˜¯ `instanceof` çš„ç”¨æ³•ï¼Œä½†æ˜¯ `instanceof` çš„åŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ ¹æ® ECMAScript è¯­è¨€è§„èŒƒï¼Œæˆ‘æ¢³ç†äº†ä¸€ä¸‹å¤§æ¦‚çš„æ€è·¯ï¼Œç„¶åæ•´ç†äº†ä¸€æ®µä»£ç å¦‚ä¸‹

```
function new_instance_of(leftVaule, rightVaule) { 
    let rightProto = rightVaule.prototype; // å–å³è¡¨è¾¾å¼çš„ prototype å€¼
    leftVaule = leftVaule.__proto__; // å–å·¦è¡¨è¾¾å¼çš„__proto__å€¼
    while (true) {
    	if (leftVaule === null) {
            return false;	
        }
        if (leftVaule === rightProto) {
            return true;	
        } 
        leftVaule = leftVaule.__proto__ 
    }
}
å¤åˆ¶ä»£ç 
```

å…¶å® `instanceof` ä¸»è¦çš„å®ç°åŸç†å°±æ˜¯åªè¦å³è¾¹å˜é‡çš„ `prototype` åœ¨å·¦è¾¹å˜é‡çš„åŸå‹é“¾ä¸Šå³å¯ã€‚å› æ­¤ï¼Œ`instanceof` åœ¨æŸ¥æ‰¾çš„è¿‡ç¨‹ä¸­ä¼šéå†å·¦è¾¹å˜é‡çš„åŸå‹é“¾ï¼Œç›´åˆ°æ‰¾åˆ°å³è¾¹å˜é‡çš„ `prototype`ï¼Œå¦‚æœæŸ¥æ‰¾å¤±è´¥ï¼Œåˆ™ä¼šè¿”å› falseï¼Œå‘Šè¯‰æˆ‘ä»¬å·¦è¾¹å˜é‡å¹¶éæ˜¯å³è¾¹å˜é‡çš„å®ä¾‹ã€‚

çœ‹å‡ ä¸ªå¾ˆæœ‰è¶£çš„ä¾‹å­

```
function Foo() {
}

Object instanceof Object // true
Function instanceof Function // true
Function instanceof Object // true
Foo instanceof Foo // false
Foo instanceof Object // true
Foo instanceof Function // true
å¤åˆ¶ä»£ç 
```

è¦æƒ³å…¨éƒ¨ç†è§£ `instanceof` çš„åŸç†ï¼Œé™¤äº†æˆ‘ä»¬åˆšåˆšæåˆ°çš„å®ç°åŸç†ï¼Œæˆ‘ä»¬è¿˜éœ€è¦çŸ¥é“ JavaScript çš„åŸå‹ç»§æ‰¿åŸç†ã€‚

å…³äºåŸå‹ç»§æ‰¿çš„åŸç†ï¼Œæˆ‘ç®€å•ç”¨ä¸€å¼ å›¾æ¥è¡¨ç¤º



![img](https://user-gold-cdn.xitu.io/2018/5/28/163a55d5d35b866d?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



æˆ‘ä»¬çŸ¥é“æ¯ä¸ª JavaScript å¯¹è±¡å‡æœ‰ä¸€ä¸ªéšå¼çš„ `__proto__` åŸå‹å±æ€§ï¼Œè€Œæ˜¾å¼çš„åŸå‹å±æ€§æ˜¯ `prototype`ï¼Œåªæœ‰ `Object.prototype.__proto__` å±æ€§åœ¨æœªä¿®æ”¹çš„æƒ…å†µä¸‹ä¸º null å€¼ã€‚æ ¹æ®å›¾ä¸Šçš„åŸç†ï¼Œæˆ‘ä»¬æ¥æ¢³ç†ä¸Šé¢æåˆ°çš„å‡ ä¸ªæœ‰è¶£çš„ `instanceof` ä½¿ç”¨çš„ä¾‹å­ã€‚

- `Object instanceof Object`

  ç”±å›¾å¯çŸ¥ï¼ŒObject çš„ `prototype` å±æ€§æ˜¯ `Object.prototype`, è€Œç”±äº Object æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”± Function æ‰€åˆ›å»ºï¼Œæ‰€ä»¥ `Object.__proto__` çš„å€¼æ˜¯ `Function.prototype`ï¼Œè€Œ `Function.prototype` çš„ `__proto__` å±æ€§æ˜¯ `Object.prototype`ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ¤æ–­å‡ºï¼Œ`Object instanceof Object` çš„ç»“æœæ˜¯ true ã€‚ç”¨ä»£ç ç®€å•çš„è¡¨ç¤ºä¸€ä¸‹

  ```
  leftValue = Object.__proto__ = Function.prototype;
  rightValue = Object.prototype;
  // ç¬¬ä¸€æ¬¡åˆ¤æ–­
  leftValue != rightValue
  leftValue = Function.prototype.__proto__ = Object.prototype
  // ç¬¬äºŒæ¬¡åˆ¤æ–­
  leftValue === rightValue
  // è¿”å› true
  å¤åˆ¶ä»£ç 
  ```

  `Function instanceof Function` å’Œ `Function instanceof Object` çš„è¿è¡Œè¿‡ç¨‹ä¸ `Object instanceof Object` ç±»ä¼¼ï¼Œæ•…ä¸å†è¯¦è¯´ã€‚

  ### Object.prototype.toString()

  ## [è¯­æ³•](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/toString#è¯­æ³•)

  ```
  obj.toString()
  ```

  ### [è¿”å›å€¼](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/toString#è¿”å›å€¼)

  ä¸€ä¸ªè¡¨ç¤ºè¯¥å¯¹è±¡çš„å­—ç¬¦ä¸²ã€‚

  ## [æè¿°](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/toString#æè¿°)

  æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ª `toString()` æ–¹æ³•ï¼Œå½“è¯¥å¯¹è±¡è¢«è¡¨ç¤ºä¸ºä¸€ä¸ªæ–‡æœ¬å€¼æ—¶ï¼Œæˆ–è€…ä¸€ä¸ªå¯¹è±¡ä»¥é¢„æœŸçš„å­—ç¬¦ä¸²æ–¹å¼å¼•ç”¨æ—¶è‡ªåŠ¨è°ƒç”¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ`toString()` æ–¹æ³•è¢«æ¯ä¸ª `Object` å¯¹è±¡ç»§æ‰¿ã€‚å¦‚æœæ­¤æ–¹æ³•åœ¨è‡ªå®šä¹‰å¯¹è±¡ä¸­æœªè¢«è¦†ç›–ï¼Œ`toString()` è¿”å› "[object *type*]"ï¼Œå…¶ä¸­ `type` æ˜¯å¯¹è±¡çš„ç±»å‹ã€‚ä»¥ä¸‹ä»£ç è¯´æ˜äº†è¿™ä¸€ç‚¹ï¼š

  ```
  var o = new Object();
  o.toString(); // returns [object Object]
  ```

  å½“ toString æ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œä¸‹é¢çš„æ­¥éª¤ä¼šè¢«æ‰§è¡Œï¼š

1. å¦‚æœ this å€¼æ˜¯ undefinedï¼Œå°±è¿”å› [object Undefined]
2. å¦‚æœ this çš„å€¼æ˜¯ nullï¼Œå°±è¿”å› [object Null]
3. è®© O æˆä¸º ToObject(this) çš„ç»“æœ
4. è®© class æˆä¸º O çš„å†…éƒ¨å±æ€§ [[Class]] çš„å€¼
5. æœ€åè¿”å›ç”± "[object " å’Œ class å’Œ "]" ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆçš„å­—ç¬¦ä¸²

é€šè¿‡è§„èŒƒï¼Œæˆ‘ä»¬è‡³å°‘çŸ¥é“äº†è°ƒç”¨ Object.prototype.toString ä¼šè¿”å›ä¸€ä¸ªç”± "[object " å’Œ class å’Œ "]" ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œè€Œ class æ˜¯è¦åˆ¤æ–­çš„å¯¹è±¡çš„å†…éƒ¨å±æ€§ã€‚

è®©æˆ‘ä»¬å†™ä¸ª demo:

```
console.log(Object.prototype.toString.call(undefined)) // [object Undefined]
console.log(Object.prototype.toString.call(null)) // [object Null]

var date = new Date();
console.log(Object.prototype.toString.call(date)) // [object Date]
```

ç”±æ­¤æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ª class å€¼å°±æ˜¯è¯†åˆ«å¯¹è±¡ç±»å‹çš„å…³é”®ï¼

è®©æˆ‘ä»¬çœ‹ä¸ª demo:

```
// ä»¥ä¸‹æ˜¯11ç§ï¼š
var number = 1;          // [object Number]
var string = '123';      // [object String]
var boolean = true;      // [object Boolean]
var und = undefined;     // [object Undefined]
var nul = null;          // [object Null]
var obj = {a: 1}         // [object Object]
var array = [1, 2, 3];   // [object Array]
var date = new Date();   // [object Date]
var error = new Error(); // [object Error]
var reg = /a/g;          // [object RegExp]
var func = function a(){}; // [object Function]

function checkType() {
    for (var i = 0; i < arguments.length; i++) {
        console.log(Object.prototype.toString.call(arguments[i]))
    }
}

checkType(number, string, boolean, und, nul, obj, array, date, error, reg, func)
```

é™¤äº†ä»¥ä¸Š 11 ç§ä¹‹å¤–ï¼Œè¿˜æœ‰ï¼š

```
console.log(Object.prototype.toString.call(Math)); // [object Math]
console.log(Object.prototype.toString.call(JSON)); // [object JSON]
```

é™¤äº†ä»¥ä¸Š 13 ç§ä¹‹å¤–ï¼Œè¿˜æœ‰ï¼š

```
function a() {
    console.log(Object.prototype.toString.call(arguments)); // [object Arguments]
}
a();
```

æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¯†åˆ«è‡³å°‘ 14 ç§ç±»å‹ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ç®—å‡ºæ¥ï¼Œ[[class]] å±æ€§è‡³å°‘æœ‰ 12 ä¸ªã€‚



### æ€»ç»“ï¼š

â€‹		1.typeofå¯ç”¨äºæ£€æµ‹String Number Boolean Undifined Symbolè¿™äº”ç§åŸºæœ¬ç±»å‹ï¼ˆé™¤äº†objectå’Œnullï¼‰ ï¼ˆè¿˜æœ‰functionä¹Ÿå¯ä»¥æ£€æµ‹ï¼‰

â€‹			ç¼ºç‚¹ï¼šnullæœ‰bugï¼Œåªèƒ½å‡†ç¡®æ£€éªŒåŸºæœ¬æ•°æ®ç±»å‹

â€‹		2.instanceof å¯ç”¨äºæ£€æµ‹å¼•ç”¨ç±»å‹çš„å…·ä½“ç±»å‹ï¼ˆåˆ¤æ–­å¯¹è±¡çš„å…·ä½“ç±»å‹ï¼‰

â€‹			ç¼ºç‚¹ï¼š `instanceof` åªèƒ½ç”¨æ¥åˆ¤æ–­å¯¹è±¡ç±»å‹ï¼ŒåŸå§‹ç±»å‹ä¸å¯ä»¥ã€‚å¹¶ä¸”æ‰€æœ‰å¯¹è±¡ç±»å‹ instanceof Object éƒ½æ˜¯ trueï¼Œä¸”ä¸åŒäºå…¶ä»–ä¸¤ç§æ–¹æ³•çš„æ˜¯å®ƒä¸èƒ½æ£€æµ‹å‡º`iframes`ã€‚

â€‹		3.Object.prototype.toString() å¯ç”¨äºæ£€æµ‹æ‰€æœ‰çš„æ•°æ®ç±»å‹

â€‹			ç¼ºç‚¹ï¼šä¸èƒ½ç²¾å‡†åˆ¤æ–­è‡ªå®šä¹‰å¯¹è±¡

```
function f(name) {
    this.name=name;
}
var f1=new f(â€˜martinâ€˜);
console.log(Object.prototype.toString.call(f1));//[object Object]
```

## 3. å¯è¿­ä»£å¯¹è±¡ã€ç±»æ•°ç»„ã€æ•°ç»„çš„åŒºåˆ«ä¸è½¬æ¢ 

### æ¦‚è§ˆ

- å¯è¿­ä»£å¯¹è±¡æ˜¯æŒ‡å®ç°äº† `[Symbol.iterator]` æ–¹æ³•å±æ€§çš„å¯¹è±¡ã€‚
- ç±»æ•°ç»„å¯¹è±¡åˆ™å…·æœ‰ä¸€ä¸ª `.length` å±æ€§ã€‚
- å¯ä»¥ä½¿ç”¨ `Array.from` å°†å¯è¿­ä»£å¯¹è±¡å’Œç±»æ•°ç»„å¯¹è±¡è½¬ä¸ºçœŸå®æ•°ç»„ã€‚



![image.png](https://user-gold-cdn.xitu.io/2020/1/7/16f7dcf8c8d6d9dc?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

## è¾¨åˆ«

[å¯è¿­ä»£å¯¹è±¡](https://www.yuque.com/zhangbao/weekly/day-4)ä¸[ç±»æ•°ç»„å¯¹è±¡](https://www.yuque.com/zhangbao/weekly/day-5)æ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„æ¦‚å¿µï¼Œä¸è¦å¼„æ··äº†ã€‚

- *å¯è¿­ä»£å¯¹è±¡* æ˜¯æŒ‡å®ç°äº† `[Symbol.iterator]` æ–¹æ³•å±æ€§çš„å¯¹è±¡ã€‚
- *ç±»æ•°ç»„å¯¹è±¡* åˆ™å…·æœ‰ä¸€ä¸ª `.length` å±æ€§ï¼Œå› æ­¤è¯´å®ƒæ˜¯ç±»ä¼¼æ•°ç»„çš„ã€‚

æ¯”å¦‚ï¼Œä¸‹é¢çš„ç±»æ•°ç»„å¯¹è±¡å°±èƒ½ä¸ç”¨ `for...of` å¾ªç¯éå†ã€‚

```
// å› ä¸ºå…·æœ‰ length å±æ€§ï¼Œå› æ­¤å±äºç±»æ•°ç»„å¯¹è±¡
let arrayLike = {
  0: "Hello",
  1: "World",
  length: 2
};

// æŠ¥é”™ï¼for...of æ˜¯æ— æ³•éå†æ²¡æœ‰éƒ¨ç½² [Symbol.iterator] å±æ€§çš„å¯¹è±¡çš„
for (let item of arrayLike) {}
å¤åˆ¶ä»£ç 
```

ä½†æ˜¯ï¼Œ**å¯è¿­ä»£å¯¹è±¡å’Œç±»æ•°ç»„å¯¹è±¡å¹¶éæ˜¯ç›¸äº’æ’æ–¥çš„**ã€‚æ¯”å¦‚ï¼Œå­—ç¬¦ä¸²å¯¹è±¡æ—¢æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼ˆèƒ½å¤Ÿè¢« `for...of` å¾ªç¯éå†ï¼‰ï¼Œåˆæ˜¯ç±»æ•°ç»„å¯¹è±¡ã€‚



![image.png](https://user-gold-cdn.xitu.io/2020/1/7/16f7dcf8c8d5f0ee?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



ä½†ä¸ç®¡æ˜¯å¯è¿­ä»£å¯¹è±¡è¿˜æ˜¯ç±»æ•°ç»„å¯¹è±¡ï¼Œè¯´å…¶ä»–å®ƒä»¬éƒ½**ä¸æ˜¯çœŸå®æ„ä¹‰ä¸Šçš„æ•°ç»„**ï¼Œå› æ­¤ä¸å…·å¤‡è¯¸å¦‚ `forEach`ã€`map`ã€`filter`ã€`reduce` ç­‰è¿™äº›æ•°ç»„æ–¹æ³•ã€‚è¿™æœ‰æ—¶ä¼šç»™æˆ‘ä»¬æ“ä½œå¯¹è±¡å¸¦æ¥å¾ˆå¤§çš„ä¸ä¾¿ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯¥å¦‚ä½•åšï¼Œæ‰èƒ½åœ¨è¿™äº›å¯¹è±¡ä¸Šä½¿ç”¨æ•°ç»„æ–¹æ³•å‘¢ï¼Ÿ

ç­”æ¡ˆæ˜¯å¯ä»¥ä½¿ç”¨ `Array.from` æ–¹æ³•ã€‚

### Array.from

[`Array.from`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from) è¿™ä¸ªæ–¹æ³•ç¥å¥‡çš„åœ°æ–¹åœ¨äºï¼Œå®ƒå¯ä»¥å°†ä¼ å…¥çš„å¯è¿­ä»£å¯¹è±¡æˆ–ç±»æ•°ç»„å¯¹è±¡ï¼Œéƒ½èƒ½è½¬æ¢æˆçœŸå®çš„æ•°ç»„ã€‚



### ä¸¤ä¸ªä¾‹å­

ä¸¾ä¸ªä¾‹å­ï¼š



![image.png](https://user-gold-cdn.xitu.io/2020/1/7/16f7dcf8c9e8053d?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



çœ‹åˆ°æ²¡ï¼Œ`arrayLike` ä¼ å…¥ `Array.from` ä¹‹åï¼Œè¿”å›çš„æ˜¯çœŸå®çš„æ•°ç»„ã€‚è¿™æ ·æˆ‘ä»¬å°±èƒ½å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨æ•°ç»„æ–¹æ³•æ“ä½œæ•°æ®äº†ã€‚

å†ä»¥[ã€Šå¯è¿­ä»£å¯¹è±¡ã€‹](https://www.yuque.com/zhangbao/weekly/day-4)ä¸€æ–‡é‡Œçš„ `range` å˜é‡ä¸ºä¾‹ï¼ˆå¦‚ä¸‹ï¼‰ã€‚

```
let range = {
  from: 1,
  to: 5
}

range[Symbol.iterator] = function() {
  return {
    current: this.from,
    last: this.to,
    next() {
      if (this.current <= this.last) {
        return { done: false, value: this.current++ }
      } else {
        return { done: true }
      }
    }
  }
}
å¤åˆ¶ä»£ç 
```

æˆ‘ä»¬ç”¨ `Array.from` å¤„ç†ä¸€ä¸‹ã€‚



![image.png](https://user-gold-cdn.xitu.io/2020/1/7/16f7dcf8ca685b7d?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



å‘ç°ä¹Ÿè¢«æ­£å¸¸å¤„ç†äº†ã€‚



### å®Œæ•´è¯­æ³•

å…¶å®ä¸Šé¢éƒ½æ˜¯åŸºæœ¬ç”¨æˆ·ï¼ŒArray.from æ–¹æ³•çš„å®Œæ•´è¯­æ³•æ˜¯è¿™æ ·çš„ï¼š

```
Array.from(obj[, mapFn, thisArg])
å¤åˆ¶ä»£ç 
```

é™¤äº†ä¹‹å‰ä½¿ç”¨è¿‡çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå³è¢«å¤„ç†çš„å¯¹è±¡ï¼Œå¦å¤–ä¸¤ä¸ªå¯é€‰å‚æ•°å«ä¹‰æ˜¯ï¼š

- `mapFn`ï¼šåœ¨å°†æ¯ä¸ªæˆå‘˜æ·»åŠ è¿›æœ€ç»ˆè¿”å›çš„æ•°ç»„ä¹‹å‰ï¼Œæ‰§è¡Œçš„æ˜ å°„å‡½æ•°ã€‚
- `thisArg`ï¼šæŒ‡å®šæ˜ å°„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ `this` çš„å€¼ã€‚

ä¸¾ä¸ªä¾‹å­ï¼š



![image.png](https://user-gold-cdn.xitu.io/2020/1/7/16f7dcf8caaa1ca3?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)



ä»ä¸Šå›¾å¯ä»¥çœ‹è§ï¼Œé€šè¿‡å°† `mapFn` å†…çš„ `this` æŒ‡å‘ `thisArg`ï¼Œæˆ‘ä»¬å°† `"apple"` è½¬ä¸ºäº† `"ğŸ"`ï¼Œå°† `"banana"` è½¬ä¸ºäº† `"ğŸŒ"`ï¼Œæœ€åå¾—åˆ°äº†æœ€ç»ˆè¿”å›çš„æ•°ç»„ `["ğŸ", "ğŸŒ"]`ã€‚

## 4. æ•°ç»„çš„å¸¸è§API 

â€‹	å‰è¨€

æˆ‘ä»¬åœ¨å­¦åˆ°jsä¸­æ•°ç»„çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæ¥è§¦åˆ°jsä¸­æ•°ç»„çš„ä¸€äº›æ–¹æ³•è¿™äº›æ–¹æ³•å¯¹æˆ‘ä»¬æ¥è¯´ï¼Œå¯ä»¥å¾ˆä¾¿åˆ©çš„è¾¾åˆ°æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼Œä½†æ˜¯å› ä¸ºæ–¹æ³•æ¯”è¾ƒå¤šï¼Œæœ‰äº›æ–¹æ³•ä¹Ÿä¸å¸¸ç”¨ï¼Œå¯èƒ½ä¼šè¿‡ä¸€æ®µæ—¶é—´å°±ä¼šå¿˜è®°ï¼Œé‚£ä¹ˆåœ¨è¿™é‡Œæˆ‘æ•´ç†äº†21ä¸ªæ•°ç»„çš„æ–¹æ³•ï¼Œä¾›å¤§å®¶æŸ¥é˜…ã€‚

### å¸¸ç”¨æ•°ç»„æ–¹æ³•æ±‡æ€»

![img](https://pic4.zhimg.com/80/v2-1011afa98a4a69b5bc58a2824d6813ef_720w.jpg)

### æ–¹æ³•è§£æ

### 1ï¼šconcat();

åŠŸèƒ½ï¼š`åˆå¹¶æ•°ç»„`ï¼Œå¯ä»¥åˆå¹¶ä¸€ä¸ªæˆ–å¤šä¸ªæ•°ç»„ï¼Œä¼šè¿”å›åˆå¹¶æ•°ç»„ä¹‹åçš„æ•°æ®ï¼Œ`ä¸ä¼šæ”¹å˜åŸæ¥çš„æ•°ç»„`ï¼›

```js
var str1 = [12,2,"hello"];var str2 = ["world"];
console.log(str1.concat(str2));ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//[12, 2, "hello", "world"]
console.log(str1);ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//[12,2,"hello"];
```

### 2ï¼šjoin();

åŠŸèƒ½ï¼šå°†æ•°ç»„è½¬ä¸ºå­—ç¬¦ä¸²å¹¶è¿”å›è½¬åŒ–çš„å­—ç¬¦ä¸²æ•°æ®ï¼Œä¸ä¼šæ”¹å˜åŸæ¥çš„æ•°ç»„ï¼›

æ³¨æ„ï¼š()ä¸­ç”¨åŒå¼•å·åŒ…æ‹¬è‡ªå·±æƒ³ç”¨çš„åˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºé€—å·ï¼Œè¿™é‡Œæ–¹ä¾¿è§‚å¯Ÿï¼Œæˆ‘ç”¨äº†-ã€€ã€€

```js
var str1 = [12,2,"hello"];
var str2 = ["world"];
console.log(str1.join("-"));ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//12-2-hello
console.log(str1);ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//[12, 2, "hello"]
```

### 3ï¼špop();

åŠŸèƒ½ï¼š`åˆ é™¤æ•°ç»„çš„æœ€åä¸€ä½`ï¼Œå¹¶ä¸”`è¿”å›åˆ é™¤çš„æ•°æ®ï¼Œä¼šæ”¹å˜åŸæ¥çš„æ•°ç»„`

```js
var str1 = [12,2,"hello"];
console.log(str1.pop()ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//hello
console.log(str1);ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//[12, 2]
```

### 4ï¼šshift();

åŠŸèƒ½ï¼š`åˆ é™¤æ•°ç»„çš„ç¬¬ä¸€ä½æ•°æ®`ï¼Œå¹¶ä¸”`è¿”å›åˆ é™¤çš„æ•°æ®ï¼Œä¼šæ”¹å˜åŸæ¥çš„æ•°ç»„`ã€‚

### 5ï¼šunshift();

åŠŸèƒ½ï¼šåœ¨æ•°ç»„çš„`é¦–ä½æ–°å¢ä¸€ä¸ªæˆ–å¤šæ•°æ®`ï¼Œå¹¶ä¸”`è¿”å›æ–°æ•°ç»„çš„é•¿åº¦ï¼Œä¼šæ”¹å˜åŸæ¥çš„æ•°ç»„`

æ³¨æ„ï¼š`unshift()`æ–¹æ³•è¿”å›çš„æ•°æ®æ˜¯æ–°æ•°ç»„çš„é•¿åº¦ï¼Œå®ƒå¢åŠ çš„æ•°æ®å¯ä»¥æ˜¯ä¸€ä¸ªä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªï¼Œå¯ä»¥ç†è§£ä¸ºå¢åŠ ä¸€è¿ä¸²çš„æ•°æ®ï¼Œ

```js
var str1 = [12,2,"hello"];
var str2 = [43,2,"test"];
console.log(str1.unshift("ä½ å¥½"));ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//4
console.log(str2.unshift("hello","world"));ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//5
console.log(str1);ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//["ä½ å¥½", 12, 2, "hello"]
console.log(str2);ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//["hello", "world", 43, 2, "test"]
```

### 6ï¼špush();

åŠŸèƒ½ï¼šåœ¨æ•°ç»„çš„æœ€åä¸€ä½æ–°å¢ä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®ï¼Œå¹¶ä¸”è¿”å›æ–°æ•°ç»„çš„é•¿åº¦ï¼Œä¼šæ”¹å˜åŸæ¥çš„æ•°ç»„

æ³¨æ„ï¼špush()æ–¹æ³•è¿”å›çš„æ˜¯æ•°æ®æ˜¯æ–°æ•°ç»„çš„é•¿åº¦ï¼Œå®ƒå¢åŠ çš„æ•°æ®å¯ä»¥æ˜¯ä¸€ä¸ªä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªï¼Œå¯ä»¥ç†è§£ä¸ºå¢åŠ ä¸€è¿ä¸²çš„æ•°æ®ã€‚

```js
var str1 = [12,2,"hello"];
var str2 = [43,2,"test"];
console.log(str1.push("ä½ å¥½"));ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//4
console.log(str2.push("hello","world"));ã€€ã€€ã€€ã€€//5
console.log(str1);ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//[12, 2, "hello","ä½ å¥½"]
console.log(str2);ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//[43, 2, "test","hello", "world"]
```

### 7ï¼šreverse();

åŠŸèƒ½ï¼šå°†`æ•°ç»„çš„æ•°æ®è¿›è¡Œåè½¬ï¼Œå¹¶ä¸”è¿”å›åè½¬åçš„æ•°ç»„ï¼Œä¼šæ”¹å˜åŸæ•°ç»„`

```js
var str1 = [12,2,"hello"];
console.log(str1.reverse());ã€€ã€€ã€€ã€€ã€€ã€€//["hello", 2, 12]
console.log(str1);ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//["hello", 2, 12]
```

### 8ï¼šsort();

åŠŸèƒ½ï¼šå¯¹æ•°ç»„å†…çš„æ•°æ®è¿›è¡Œæ’åº(é»˜è®¤ä¸ºå‡åº)ï¼Œå¹¶ä¸”è¿”å›æ’è¿‡åºçš„æ–°æ•°ç»„ï¼Œä¼šæ”¹å˜åŸæ¥çš„æ•°ç»„

æ³¨æ„ï¼š

- 8.1ï¼šè¿™é‡Œçš„æ’åºæ˜¯`é’ˆå¯¹å­—ç¬¦çš„æ’åº`ï¼Œå…ˆä½¿ç”¨æ•°ç»„çš„`toString()`æ–¹æ³•è½¬ä¸ºå­—ç¬¦ä¸²ï¼Œå†é€ä½æ¯”è¾ƒï¼Œ3æ˜¯å¤§äº12çš„ï¼Œå› ä¸ºé¦–ä½`3>1`ï¼Œä¸è¦ä¸`Number`å‹çš„æ•°æ®æ’åºæ··æ·†
- 8.2ï¼š`str2`æ•°ç»„ä¸­å¢åŠ äº†ä¸‰ä¸ªå­—ç¬¦ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ¯”è¾ƒçš„æ—¶å€™ï¼Œ`zoom`æ˜¯æœ€å¤§çš„ï¼Œå› ä¸ºé¦–ä½çš„è‹±æ–‡å­—æ¯é€šè¿‡`ASCII`ç å¯ä»¥è½¬ä¸ºç›¸åº”çš„æ•°å€¼ï¼Œå†æ ¹æ®æ•°å€¼æ¯”è¾ƒ

```js
var str1 = [12,2,43,5,2,5];
var str2 = [92,2,43,"hello",'zoom',5,2,5];
console.log(str1.sort());//[12, 2, 2, 43, 5, 5]
console.log(str1);//[12, 2, 2, 43, 5, 5]
console.log(str2.sort());//[2, 2, 43, 5, 5, 92, "abc", "hello", "zoom"]
console.log(str2);//[2, 2, 43, 5, 5, 92, "abc", "hello", "zoom"]
```

- 8.3ï¼šæ’åºé—®é¢˜

å‚æ•°ï¼š`sort(callback)` å¦‚æœéœ€è¦æŒ‰ç…§æ•°å€¼æ’åºï¼Œéœ€è¦ä¼ å‚ã€‚`sort(callback)`ï¼Œ`callback`ä¸ºå›è°ƒå‡½æ•°ï¼Œè¯¥å‡½æ•°åº”è¯¥å…·æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œæ¯”è¾ƒè¿™ä¸¤ä¸ªå‚æ•°ï¼Œç„¶åè¿”å›ä¸€ä¸ªç”¨äºè¯´æ˜è¿™ä¸¤ä¸ªå€¼çš„ç›¸å¯¹é¡ºåºçš„æ•°å­—`ï¼ˆa-bï¼‰`ã€‚å…¶è¿”å›å€¼å¦‚ä¸‹ï¼š

è‹¥ a å°äº bï¼Œè¿”å›ä¸€ä¸ªå°äº 0 çš„å€¼ã€‚

è‹¥ a ç­‰äº bï¼Œåˆ™è¿”å› 0ã€‚

è‹¥ a å¤§äº bï¼Œåˆ™è¿”å›ä¸€ä¸ªå¤§äº 0 çš„å€¼ã€‚

```js
var str3 = [92,2,43,5,2,5];     
console.log(str3.sort(fn));ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//[2, 2, 5, 5, 43, 92]
console.log(str3);ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//[2, 2, 5, 5, 43, 92]
function fn (a,b){
ã€€ã€€ã€€ã€€return a-b;
 }
```

### 9ï¼šslice();

åŠŸèƒ½ï¼šæˆªå–æŒ‡å®šä½ç½®çš„æ•°ç»„ï¼Œå¹¶ä¸”è¿”å›æˆªå–çš„æ•°ç»„ï¼Œä¸ä¼šæ”¹å˜åŸæ•°ç»„

å‚æ•°ï¼š`slice(startIndex, endIndex)`

æ³¨æ„ï¼šå¯ä»å·²æœ‰çš„æ•°ç»„ä¸­è¿”å›é€‰å®šçš„å…ƒç´ ã€‚è¯¥æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°`slice(start,end)`ï¼Œ`stsrt`ä¸ºå¿…é€‰ï¼Œè¡¨ç¤ºä»ç¬¬å‡ ä½å¼€å§‹ï¼›`end`ä¸ºå¯é€‰ï¼Œè¡¨ç¤ºåˆ°ç¬¬å‡ ä½ç»“æŸ(ä¸åŒ…å«endä½)ï¼Œçœç•¥è¡¨ç¤ºåˆ°æœ€åä¸€ä½ï¼›startå’Œendéƒ½å¯ä»¥ä¸ºè´Ÿæ•°ï¼Œè´Ÿæ•°æ—¶è¡¨ç¤ºä»æœ€åä¸€ä½å¼€å§‹ç®—èµ·ï¼Œå¦‚-1è¡¨ç¤ºæœ€åä¸€ä½ã€‚

```js
var arr = ["T1","J1","L1","L2","M1"];
    console.log(arr.slice(1,3));        //["J1","L1"]
    console.log(arr.slice(1));          //["J1","L1","L2","M1"]
    console.log(arr.slice(-4,-1));      //["J1","L1","L2"]
    console.log(arr.slice(-2));         //["Lily","M1"]
    console.log(arr.slice(1,-2));       //["J1","L1"]
    console.log(arr);                   //["T1","J1","L1","L2","M1"]
```

### 10ï¼šsplice();

åŠŸèƒ½ï¼šå‘æ•°ç»„ä¸­æ·»åŠ ï¼Œæˆ–ä»æ•°ç»„åˆ é™¤ï¼Œæˆ–æ›¿æ¢æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œç„¶åè¿”å›è¢«åˆ é™¤/æ›¿æ¢çš„å…ƒç´ ã€‚ï¼ˆå¢åˆ æ”¹ï¼‰

å‚æ•°ï¼š`splice(start,num,data1,data2,...)`; æ‰€æœ‰å‚æ•°å…¨éƒ¨å¯é€‰ã€‚

startï¼šåˆ é™¤æ•°ç»„å…ƒç´ çš„å¼€å§‹ç´¢å¼•

numï¼ˆå¯é€‰ï¼‰ï¼šéœ€è¦åˆ é™¤çš„å…ƒç´ ä¸ªæ•°

data1ã€data2...ï¼ˆå¯é€‰ï¼‰ï¼šæ’å…¥æ•°ç»„çš„å…ƒç´ 

##### 1.å¦‚ä½•å¢åŠ å…ƒç´ 

```js
var arr = ["Tom","Jack","Lucy","Lily","May"];
console.log(arr.splice(2,0,"a","b"));//[]
console.log(arr);//["Tom", "Jack", "a", "b", "Lucy", "Lily", "May"]---åŸæ•°ç»„æ”¹å˜
```

##### 2.å¦‚ä½•åˆ é™¤æ•°ç»„å…ƒç´ 

```js
const numbers = [1, 2, 3, 4, 5];
const removes = numbers.splice(2);
console.log(numbers); //[1, 2]
console.log(removes); //[3, 4, 5]
```

##### 3.å¦‚ä½•æ›¿æ¢å…ƒç´ 

```
//æ›¿æ¢ç¬¬2ï¼Œ3ä½çš„å…ƒç´ 
const numbers = [1, 2, 3, 4, 5];
const removes = numbers.splice(2, 2, 'A', 'B');
console.log(numbers); //[1, 2, "A", "B", 5]

console.log(removes); //[3, 4]
```

### 11ï¼štoString();

åŠŸèƒ½ï¼šå°†æ•°ç»„è½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œ`ç±»ä¼¼äºæ²¡æœ‰å‚æ•°çš„join()`ã€‚è¯¥æ–¹æ³•ä¼šåœ¨æ•°æ®å‘ç”Ÿéšå¼ç±»å‹è½¬æ¢æ—¶è¢«è‡ªåŠ¨è°ƒç”¨ï¼Œå¦‚æœæ‰‹åŠ¨è°ƒç”¨ï¼Œå°±æ˜¯ç›´æ¥è½¬ä¸ºå­—ç¬¦ä¸²ã€‚ä¸ä¼šæ”¹å˜åŸæ•°ç»„

```js
var str = [1,2,3];
console.log(str.toString()); //1,2,3
console.log(str);//[1,2,3]
```

### 12ï¼švalueOf();

åŠŸèƒ½ï¼šè¿”å›æ•°ç»„çš„åŸå§‹å€¼ï¼ˆä¸€èˆ¬æƒ…å†µä¸‹å…¶å®å°±æ˜¯æ•°ç»„è‡ªèº«ï¼‰ï¼Œä¸€èˆ¬ç”±jsåœ¨åå°è°ƒç”¨ï¼Œå¹¶ä¸æ˜¾å¼çš„å‡ºç°åœ¨ä»£ç ä¸­

```js
var str = [1,2,3];
console.log(str.valueOf()); //[1,2,3]
console.log(str); //[1,2,3]
//ä¸ºäº†è¯æ˜è¿”å›çš„æ˜¯æ•°ç»„è‡ªèº«
console.log(str.valueOf() == str);//true
```

### 13ï¼šIndexOf();ï¼ˆæŸ¥ï¼‰

åŠŸèƒ½ï¼šæ ¹æ®æŒ‡å®šçš„æ•°æ®ï¼Œä»å·¦å‘å³ï¼ŒæŸ¥è¯¢åœ¨æ•°ç»„ä¸­å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœä¸å­˜åœ¨æŒ‡å®šçš„æ•°æ®ï¼Œè¿”å›-1ï¼Œæ‰¾åˆ°äº†æŒ‡å®šçš„æ•°æ®è¿”å›è¯¥æ•°æ®çš„ç´¢å¼•

å‚æ•°ï¼šindexOf(value, start);valueä¸ºè¦æŸ¥è¯¢çš„æ•°æ®ï¼›startä¸ºå¯é€‰ï¼Œè¡¨ç¤ºå¼€å§‹æŸ¥è¯¢çš„ä½ç½®ï¼Œå½“startä¸ºè´Ÿæ•°æ—¶ï¼Œä»æ•°ç»„çš„å°¾éƒ¨å‘å‰æ•°ï¼›å¦‚æœæŸ¥è¯¢ä¸åˆ°valueçš„å­˜åœ¨ï¼Œåˆ™æ–¹æ³•è¿”å›-1

```
æ³¨æ„ï¼šå¦‚æœæ‰¾åˆ°è¯¥æ•°æ®ï¼Œç«‹å³è¿”å›è¯¥æ•°æ®çš„ç´¢å¼•ï¼Œä¸å†å¾€åç»§ç»­æŸ¥æ‰¾
var str = ["h","e","l","l","o"];
 console.log(str.indexOf("l"));        //2
 console.log(str.indexOf("l",3));      //3
 console.log(str.indexOf("l",4));      //-1
 console.log(str.indexOf("l",-1));     //-1
 console.log(str.indexOf("l",-3));     //2
```

### 14ï¼šlastIndexOf();ï¼ˆæŸ¥ï¼‰

åŠŸèƒ½ï¼šlastIndexOf() æ–¹æ³•å¯è¿”å›ä¸€ä¸ªæŒ‡å®šçš„å­—ç¬¦ä¸²å€¼æœ€åå‡ºç°çš„ä½ç½®ï¼Œå¦‚æœæŒ‡å®šç¬¬äºŒä¸ªå‚æ•° startï¼Œåˆ™`åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„æŒ‡å®šä½ç½®ä»åå‘å‰æœç´¢`ã€‚

å‚æ•°ï¼šlastIndexOf(value, start);valueä¸ºè¦æŸ¥è¯¢çš„æ•°æ®ï¼›startä¸ºå¯é€‰çš„æ•´æ•°å‚æ•°ã€‚è§„å®šåœ¨å­—ç¬¦ä¸²ä¸­å¼€å§‹æ£€ç´¢çš„ä½ç½®ã€‚å®ƒçš„åˆæ³•å–å€¼æ˜¯ 0 åˆ° stringObject.length - 1ã€‚å¦‚çœç•¥è¯¥å‚æ•°ï¼Œåˆ™å°†ä»å­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªå­—ç¬¦å¤„å¼€å§‹æ£€ç´¢ã€‚

```js
var str = ["h","e","l","l","o"];
console.log(str.lastIndexOf("l"));        //3
console.log(str.lastIndexOf("l",3));      //3
console.log(str.lastIndexOf("l",4));      //3
console.log(str.lastIndexOf("l",-1));     //3
console.log(str.lastIndexOf("l",-3));     //2
```

- æ³¨æ„ï¼š è¯¥æ–¹æ³•å°†`ä»åå‘å‰`æ£€ç´¢å­—ç¬¦ä¸²ï¼Œä½†è¿”å›æ˜¯ä»èµ·å§‹ä½ç½® (0) å¼€å§‹è®¡ç®—å­å­—ç¬¦ä¸²æœ€åå‡ºç°çš„ä½ç½®ã€‚ çœ‹å®ƒæ˜¯å¦å«æœ‰å­—ç¬¦ä¸²ã€‚ å¼€å§‹æ£€ç´¢çš„ä½ç½®åœ¨å­—ç¬¦ä¸²çš„ start å¤„æˆ–å­—ç¬¦ä¸²çš„ç»“å°¾ï¼ˆæ²¡æœ‰æŒ‡å®š start æ—¶ï¼‰ã€‚ `å¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…å­—ç¬¦ä¸²åˆ™è¿”å› -1 ã€‚`
- æ³¨æ„ï¼šlastIndexOf() æ–¹æ³•æ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼

### 15ï¼šincludes()ï¼›æŸ¥

æ£€æµ‹æ•°ç»„ *site* æ˜¯å¦åŒ…å« runoob :

```js
[1, 2, 3].includes(2);   ``// true
[1, 2, 3].includes(4);   ``// false
[1, 2, 3].includes(3, 3); ``// false
[1, 2, 3].includes(3, -1); ``// true
[1, 2, NaN].includes(NaN); ``// true
```



### 16ï¼šforEach();

åŠŸèƒ½ï¼šES5æ–°å¢çš„æ–¹æ³•ï¼Œç”¨æ¥éå†æ•°ç»„ï¼Œæ²¡æœ‰è¿”å›å€¼ï¼Œ

å‚æ•°ï¼šforEach(callback);callbacké»˜è®¤æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸ºvalue(éå†åˆ°çš„æ•°ç»„çš„æ•°æ®)ï¼Œindex(å¯¹åº”çš„ç´¢å¼•)ï¼Œself(æ•°ç»„è‡ªèº«)ã€‚

```js
var arr = ["Tom","Jack","Lucy","Lily","May"];
var a = arr.forEach(function(value,index,self){
     console.log(value + "--" + index + "--" + (arr === self));
})
// æ‰“å°ç»“æœä¸ºï¼š
// Tom--0--true
// Jack--1--true
// Lucy--2--true
// Lily--3--true
// May--4--true
console.log(a);     //undefined---forEachæ²¡æœ‰è¿”å›å€¼
//è¯¥æ–¹æ³•ä¸ºéå†æ–¹æ³•ï¼Œä¸ä¼šä¿®æ”¹åŸæ•°ç»„
```

### 17ï¼šmap();

åŠŸèƒ½ï¼š

åŒforEachåŠŸèƒ½ï¼›

mapçš„å›è°ƒå‡½æ•°ä¼šå°†æ‰§è¡Œç»“æœè¿”å›ï¼Œæœ€åmapå°†æ‰€æœ‰å›è°ƒå‡½æ•°çš„è¿”å›å€¼ç»„æˆæ–°æ•°ç»„è¿”å›ã€‚

- å‚æ•°ï¼š`map(callback)`;callbacké»˜è®¤æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸º`valueï¼Œindexï¼Œself`ã€‚è·Ÿä¸Šé¢çš„forEach()çš„å‚æ•°ä¸€æ ·

```js
//åŠŸèƒ½1ï¼šåŒforEach
    var arr = ["Tom","Jack","Lucy","Lily","May"];
    var a = arr.map(function(value,index,self){
        console.log(value + "--" + index + "--" + (arr === self))
    })
    // æ‰“å°ç»“æœä¸ºï¼š
    // Tom--0--true
    // Jack--1--true
    // Lucy--2--true
    // Lily--3--true
    // May--4--true

    //åŠŸèƒ½2ï¼šæ¯æ¬¡å›è°ƒå‡½æ•°çš„è¿”å›å€¼è¢«mapç»„æˆæ–°æ•°ç»„è¿”å›
    var arr = ["Tom","Jack","Lucy","Lily","May"];
    var a = arr.map(function(value,index,self){
        return "hi:"+value;
    })
    console.log(a);     //["hi:Tom", "hi:Jack", "hi:Lucy", "hi:Lily", "hi:May"]
    console.log(arr);   //["Tom", "Jack", "Lucy", "Lily", "May"]---åŸæ•°ç»„æœªæ”¹å˜
```

### 18ï¼šfilter();

åŠŸèƒ½ï¼š 1.åŒforEachåŠŸèƒ½ï¼› 2.`filterçš„å›è°ƒå‡½æ•°éœ€è¦è¿”å›å¸ƒå°”å€¼ï¼Œå½“ä¸ºtrueæ—¶ï¼Œå°†æœ¬æ¬¡æ•°ç»„çš„æ•°æ®è¿”å›ç»™filterï¼Œæœ€åfilterå°†æ‰€æœ‰å›è°ƒå‡½æ•°çš„è¿”å›å€¼ç»„æˆæ–°æ•°ç»„è¿”å›ï¼ˆæ­¤åŠŸèƒ½å¯ç†è§£ä¸ºâ€œè¿‡æ»¤â€ï¼‰`ã€‚

å‚æ•°ï¼šfilter(callback);callbacké»˜è®¤æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸ºvalueï¼Œindexï¼Œselfã€‚

```js
//åŠŸèƒ½1ï¼šåŒforEach
    var arr = ["Tom","Jack","Lucy","Lily","May"];
    var a = arr.filter(function(value,index,self){
        console.log(value + "--" + index + "--" + (arr === self))
    })
    // æ‰“å°ç»“æœä¸ºï¼š
    // Tom--0--true
    // Jack--1--true
    // Lucy--2--true
    // Lily--3--true
    // May--4--true

    //åŠŸèƒ½2ï¼šå½“å›è°ƒå‡½æ•°çš„è¿”å›å€¼ä¸ºtrueæ—¶ï¼Œæœ¬æ¬¡çš„æ•°ç»„å€¼è¿”å›ç»™filterï¼Œè¢«filterç»„æˆæ–°æ•°ç»„è¿”å›
    var arr = ["Tom","Jack","Lucy","Lily","May"];
    var a = arr.filter(function(value,index,self){
        return value.length > 3;
    })
    console.log(a);         //["Jack", "Lucy", "Lily"]
    console.log(arr);       //["Tom", "Jack", "Lucy", "Lily", "May"]---åŸæ•°ç»„æœªæ”¹å˜
```

### 19ï¼ševery();

åŠŸèƒ½ï¼š`åˆ¤æ–­æ•°ç»„ä¸­æ¯ä¸€é¡¹æ˜¯å¦éƒ½æ»¡è¶³æ¡ä»¶ï¼Œåªæœ‰æ‰€æœ‰é¡¹éƒ½æ»¡è¶³æ¡ä»¶ï¼Œæ‰ä¼šè¿”å›true`ã€‚

å‚æ•°ï¼ševery()æ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°éœ€è¦æœ‰è¿”å›å€¼ï¼Œevery(callback);callbacké»˜è®¤æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸ºvalueï¼Œindexï¼Œselfã€‚

åŠŸèƒ½1ï¼šå½“å›è°ƒå‡½æ•°çš„è¿”å›å€¼ä¸ºtrueæ—¶ï¼Œç±»ä¼¼äºforEachçš„åŠŸèƒ½ï¼Œéå†æ‰€æœ‰ï¼›å¦‚æœä¸ºfalseï¼Œé‚£ä¹ˆåœæ­¢æ‰§è¡Œï¼Œåé¢çš„æ•°æ®ä¸å†éå†ï¼Œ`åœåœ¨ç¬¬ä¸€ä¸ªè¿”å›falseçš„ä½ç½®`ã€‚

```js
//demo1:
    var arr = ["Tom","abc","Jack","Lucy","Lily","May"];
    var a = arr.every(function(value,index,self){
        console.log(value + "--" + index + "--" + (arr == self))
    })
    // æ‰“å°ç»“æœä¸ºï¼š
    // Tom--0--true
    //å› ä¸ºå›è°ƒå‡½æ•°ä¸­æ²¡æœ‰return trueï¼Œé»˜è®¤è¿”å›undefinedï¼Œç­‰åŒäºè¿”å›false

    //demo2:
    var arr = ["Tom","abc","Jack","Lucy","Lily","May"];
    var a = arr.every(function(value,index,self){
        console.log(value + "--" + index + "--" + (arr == self))
        return value.length < 4;
    })
    // æ‰“å°ç»“æœä¸ºï¼š
    // Tom--0--true
    // abc--1--true
    // Jack--2--true
    //å› ä¸ºå½“éå†åˆ°Jackæ—¶ï¼Œå›è°ƒå‡½æ•°åˆ°returnè¿”å›falseï¼Œæ­¤æ—¶Jackå·²ç»éå†ï¼Œä½†æ˜¯åé¢æ•°æ®å°±ä¸å†è¢«éå†äº†

    //demo3:
    var arr = ["Tom","abc","Jack","Lucy","Lily","May"];
    var a = arr.every(function(value,index,self){
        console.log(value + "--" + index + "--" + (arr == self))
        return true;
    })
    // æ‰“å°ç»“æœä¸ºï¼š
    // Tom--0--true
    // abc--1--true
    // Jack--2--true
    // Lucy--3--true
    // Lily--4--true
    // May--5--true
    //å› ä¸ºæ¯ä¸ªå›è°ƒå‡½æ•°çš„è¿”å›å€¼éƒ½æ˜¯trueï¼Œé‚£ä¹ˆä¼šéå†æ•°ç»„æ‰€æœ‰æ•°æ®ï¼Œç­‰åŒäºforEachåŠŸèƒ½
```

åŠŸèƒ½2ï¼šå½“æ¯ä¸ªå›è°ƒå‡½æ•°çš„è¿”å›å€¼éƒ½ä¸ºtrueæ—¶ï¼Œeveryçš„è¿”å›å€¼ä¸ºtrueï¼Œåªè¦æœ‰ä¸€ä¸ªå›è°ƒå‡½æ•°çš„è¿”å›å€¼ä¸ºfalseï¼Œeveryçš„è¿”å›å€¼éƒ½ä¸ºfalse

### 20ï¼šsome();

åŠŸèƒ½ï¼š`åˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„é¡¹ï¼Œåªè¦æœ‰ä¸€é¡¹æ»¡è¶³æ¡ä»¶ï¼Œå°±ä¼šè¿”å›true`ã€‚

å‚æ•°ï¼šsome()æ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°éœ€è¦æœ‰è¿”å›å€¼ï¼Œsome(callback);callbacké»˜è®¤æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸ºvalueï¼Œindexï¼Œselfã€‚

åŠŸèƒ½1ï¼šå› ä¸ºè¦åˆ¤æ–­æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹ï¼Œåªè¦æœ‰ä¸€ä¸ªå›è°ƒå‡½æ•°è¿”å›trueï¼Œsomeéƒ½ä¼šè¿”å›trueï¼Œæ‰€ä»¥ä¸everyæ­£å¥½ç›¸åï¼Œå½“é‡åˆ°ä¸€ä¸ªå›è°ƒå‡½æ•°çš„è¿”å›å€¼ä¸ºtrueæ—¶ï¼Œå¯ä»¥ç¡®å®šç»“æœï¼Œé‚£ä¹ˆåœæ­¢æ‰§è¡Œï¼Œåé¢éƒ½æ•°æ®ä¸å†éå†ï¼Œåœåœ¨ç¬¬ä¸€ä¸ªè¿”å›trueçš„ä½ç½®ï¼›å½“å›è°ƒå‡½æ•°çš„è¿”å›å€¼ä¸ºfalseæ—¶ï¼Œéœ€è¦ç»§ç»­å‘åæ‰§è¡Œï¼Œåˆ°æœ€åæ‰èƒ½ç¡®å®šç»“æœï¼Œæ‰€ä»¥ä¼šéå†æ‰€æœ‰æ•°æ®ï¼Œå®ç°ç±»ä¼¼äºforEachçš„åŠŸèƒ½ï¼Œéå†æ‰€æœ‰ã€‚

```js
//demo1:
    var arr = ["Tom","abc","Jack","Lucy","Lily","May"];
    var a = arr.some(function(value,index,self){
        console.log(value + "--" + index + "--" + (arr == self))
        return value.length > 3;
    })
    // æ‰“å°ç»“æœä¸ºï¼š
    // Tom--0--true
    // abc--1--true
    // Jack--2--true

    //demo2:
    var arr = ["Tom","abc","Jack","Lucy","Lily","May"];
    var a = arr.some(function(value,index,self){
        console.log(value + "--" + index + "--" + (arr == self))
        return true;
    })
    // æ‰“å°ç»“æœä¸ºï¼š
    // Tom--0--true

    //demo3:
    var arr = ["Tom","abc","Jack","Lucy","Lily","May"];
    var a = arr.some(function(value,index,self){
        console.log(value + "--" + index + "--" + (arr == self))
        return false;
    })
    // æ‰“å°ç»“æœä¸ºï¼š
    // Tom--0--true
    // abc--1--true
    // Jack--2--true
    // Lucy--3--true
    // Lily--4--true
    // May--5--true
```

åŠŸèƒ½2ï¼šä¸everyç›¸åï¼Œåªè¦æœ‰ä¸€ä¸ªå›è°ƒå‡½æ•°çš„è¿”å›å€¼éƒ½ä¸ºtrueï¼Œsomeçš„è¿”å›å€¼ä¸ºtrueï¼Œæ‰€æœ‰å›è°ƒå‡½æ•°çš„è¿”å›å€¼ä¸ºfalseï¼Œsomeçš„è¿”å›å€¼æ‰ä¸ºfalse

```js
//demo1:
    var arr = ["Tom","abc","Jack","Lucy","Lily","May"];
    var a = arr.some(function(value,index,self){
        return value.length > 3;
    })
    console.log(a);             //true

    //demo2:
    var arr = ["Tom","abc","Jack","Lucy","Lily","May"];
    var a = arr.some(function(value,index,self){
        return value.length > 4;
    })
    console.log(a);             //false
```

### 21.reduce();

åŠŸèƒ½ï¼šä»æ•°ç»„çš„ç¬¬ä¸€é¡¹å¼€å§‹ï¼Œé€ä¸ªéå†åˆ°æœ€åï¼Œè¿­ä»£æ•°ç»„çš„æ‰€æœ‰é¡¹ï¼Œç„¶å`æ„å»ºä¸€ä¸ªæœ€ç»ˆè¿”å›çš„å€¼`ã€‚

å‚æ•°ï¼šreduce()æ¥æ”¶ä¸€ä¸ªæˆ–ä¸¤ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªæ˜¯å›è°ƒå‡½æ•°ï¼Œè¡¨ç¤ºåœ¨æ•°ç»„çš„æ¯ä¸€é¡¹ä¸Šè°ƒç”¨çš„å‡½æ•°ï¼›ç¬¬äºŒä¸ªå‚æ•°ï¼ˆå¯é€‰çš„ï¼‰ä½œä¸ºå½’å¹¶çš„åˆå§‹å€¼ï¼Œè¢«å›è°ƒå‡½æ•°ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶çš„ç¬¬ä¸€ä¸ªå‚æ•°æ¥æ”¶ã€‚ reduce(callback,initial);callbacké»˜è®¤æœ‰å››ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸ºprevï¼Œnowï¼Œindexï¼Œselfã€‚ callbackè¿”å›çš„ä»»ä½•å€¼éƒ½ä¼šä½œä¸ºä¸‹ä¸€æ¬¡æ‰§è¡Œçš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚ å¦‚æœinitialå‚æ•°è¢«çœç•¥ï¼Œé‚£ä¹ˆç¬¬ä¸€æ¬¡è¿­ä»£å‘ç”Ÿåœ¨æ•°ç»„çš„ç¬¬äºŒé¡¹ä¸Šï¼Œå› æ­¤callbackçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ•°ç»„çš„ç¬¬ä¸€é¡¹ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯æ•°ç»„çš„ç¬¬äºŒé¡¹ã€‚

```js
//demo1:ä¸çœç•¥initialå‚æ•°ï¼Œå›è°ƒå‡½æ•°æ²¡æœ‰è¿”å›å€¼
    var arr = [10,20,30,40,50];
    arr.reduce(function(prev,now,index,self){
        console.log(prev + "--" + now + "--" + index + "--" + (arr == self))
    }, 2019)
    // æ‰“å°ç»“æœä¸ºï¼š
    // 2019--10--0--true
    // undefined--20--1--true
    // undefined--30--2--true
    // undefined--40--3--true
    // undefined--50--4--true
    // æ­¤æ—¶å›è°ƒå‡½æ•°æ²¡æœ‰returnï¼Œæ‰€ä»¥ä»ç¬¬äºŒæ¬¡å¼€å§‹ï¼Œprevæ‹¿åˆ°çš„æ˜¯undefined

    //demo2:çœç•¥initialå‚æ•°ï¼Œå›è°ƒå‡½æ•°æ²¡æœ‰è¿”å›å€¼
    var arr = [10,20,30,40,50];
    arr.reduce(function(prev,now,index,self){
        console.log(prev + "--" + now + "--" + index + "--" + (arr == self))
    })
    // æ‰“å°ç»“æœä¸ºï¼šç¬¬ä¸€æ¬¡ï¼Œå›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ•°ç»„çš„ç¬¬ä¸€é¡¹ã€‚ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯æ•°ç»„çš„ç¬¬äºŒé¡¹
    // 10--20--1--true
    // undefined--30--2--true
    // undefined--40--3--true
    // undefined--50--4--true
    // æ­¤æ—¶å›è°ƒå‡½æ•°æ²¡æœ‰returnï¼Œæ‰€ä»¥ä»ç¬¬äºŒæ¬¡å¼€å§‹ï¼Œprevæ‹¿åˆ°çš„æ˜¯undefined

    //demo3:ä¸çœç•¥initialå‚æ•°ï¼Œå›è°ƒå‡½æ•°æœ‰è¿”å›å€¼
    var arr = [10,20,30,40,50];
    arr.reduce(function(prev,now,index,self){
        console.log(prev + "--" + now + "--" + index + "--" + (arr == self));
        return "hello";
    }, 2019)
    // æ‰“å°ç»“æœä¸ºï¼š
    // 2019--10--0--true
    // hello--20--1--true
    // hello--30--2--true
    // hello--40--3--true
    // hello--50--4--true
    // æ­¤æ—¶å›è°ƒå‡½æ•°æœ‰returnï¼Œæ‰€ä»¥ä»ç¬¬äºŒæ¬¡å¼€å§‹ï¼Œprevæ‹¿åˆ°çš„æ˜¯å›è°ƒå‡½æ•°returnçš„å€¼

    //demo4:çœç•¥initialå‚æ•°ï¼Œå›è°ƒå‡½æ•°æœ‰è¿”å›å€¼
    var arr = [10,20,30,40,50];
    arr.reduce(function(prev,now,index,self){
        console.log(prev + "--" + now + "--" + index + "--" + (arr == self));
        return "hello";
    })
    // æ‰“å°ç»“æœä¸ºï¼šç¬¬ä¸€æ¬¡ï¼Œå›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ•°ç»„çš„ç¬¬ä¸€é¡¹ã€‚ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯æ•°ç»„çš„ç¬¬äºŒé¡¹
    // 10--20--1--true
    // hello--30--2--true
    // hello--40--3--true
    // hello--50--4--true
    // æ­¤æ—¶å›è°ƒå‡½æ•°æœ‰returnï¼Œæ‰€ä»¥ä»ç¬¬äºŒæ¬¡å¼€å§‹ï¼Œprevæ‹¿åˆ°çš„æ˜¯å›è°ƒå‡½æ•°returnçš„å€¼

    //demo5ï¼šä½¿ç”¨reduceè®¡ç®—æ•°ç»„ä¸­æ‰€æœ‰æ•°æ®çš„å’Œ
    var arr = [10,20,30,40,50];
    var sum = arr.reduce(function(prev,now,index,self){
        return prev + now;
    })
    console.log(sum);      //150
    // å›è°ƒå‡½æ•°çš„æœ€åä¸€æ¬¡returnçš„ç»“æœè¢«è¿”å›åˆ°reduceæ–¹æ³•çš„èº«ä¸Š

    //demo6ï¼šä½¿ç”¨reduceè®¡ç®—æ•°ç»„ä¸­æ‰€æœ‰æ•°æ®çš„å’Œ
    var arr = [10,20,30,40,50];
    var sum = arr.reduce(function(prev,now,index,self){
        return prev + now;
    }, 8)
    console.log(sum);      //158
    // å›è°ƒå‡½æ•°çš„æœ€åä¸€æ¬¡returnçš„ç»“æœè¢«è¿”å›åˆ°reduceæ–¹æ³•çš„èº«ä¸Š
    // å› ä¸ºreduceæœ‰ç¬¬äºŒä¸ªå‚æ•°initialï¼Œåœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶è¢«è®¡ç®—ï¼Œæ‰€ä»¥æœ€ç»ˆç»“æœè¢«åŠ ä¸Š8
```

### 22.reduceRight()

åŠŸèƒ½ï¼šï¼ˆä¸reduceç±»ä¼¼ï¼‰ä»æ•°ç»„çš„`æœ€åä¸€é¡¹`å¼€å§‹ï¼Œå‘å‰é€ä¸ªéå†åˆ°ç¬¬ä¸€ä½ï¼Œè¿­ä»£æ•°ç»„çš„æ‰€æœ‰é¡¹ï¼Œç„¶åæ„å»ºä¸€ä¸ªæœ€ç»ˆè¿”å›çš„å€¼ã€‚

å‚æ•°ï¼šåŒreduceã€‚ demoï¼šåŒreduce

### ä¸‰ï¼šå“ªäº›æ•°ç»„æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„

unshift();

push()ï¼›

shift();

pop();

sort();

reverse();

splice();

è¿™ä¸ƒä¸ªæ•°ç»„æ–¹æ³•åœ¨ä¸Šé¢éƒ½æœ‰è¿‡ä»‹ç»äº†ï¼Œå¯ä»¥çœ‹å‡ºï¼Œå†ç”¨è¿™äº›æ–¹æ³•çš„æ—¶å€™ï¼ŒåŸæ•°ç»„æ˜¯ä¼šè¢«æ”¹å˜çš„ã€‚

## 5. bindã€callã€applyçš„åŒºåˆ« 

### call å’Œ apply çš„å…±åŒç‚¹

å®ƒä»¬çš„å…±åŒç‚¹æ˜¯ï¼Œéƒ½èƒ½å¤Ÿ**æ”¹å˜å‡½æ•°æ‰§è¡Œæ—¶çš„ä¸Šä¸‹æ–‡**ï¼Œå°†ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•äº¤ç»™å¦ä¸€ä¸ªå¯¹è±¡æ¥æ‰§è¡Œï¼Œå¹¶ä¸”æ˜¯ç«‹å³æ‰§è¡Œçš„ã€‚

ä¸ºä½•è¦æ”¹å˜æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Ÿä¸¾ä¸€ä¸ªç”Ÿæ´»ä¸­çš„å°ä¾‹å­ï¼šå¹³æ—¶æ²¡æ—¶é—´åšé¥­çš„æˆ‘ï¼Œå‘¨æœ«æƒ³ç»™å­©å­ç‚–ä¸ªè…Œç¬ƒé²œå°å°ã€‚ä½†æ˜¯æ²¡æœ‰é€‚åˆçš„é”…ï¼Œè€Œæˆ‘åˆä¸æƒ³å‡ºå»ä¹°ã€‚æ‰€ä»¥å°±é—®é‚»å±…å€Ÿäº†ä¸€ä¸ªé”…æ¥ç”¨ï¼Œè¿™æ ·æ—¢è¾¾åˆ°äº†ç›®çš„ï¼ŒåˆèŠ‚çœäº†å¼€æ”¯ï¼Œä¸€ä¸¾ä¸¤å¾—ã€‚

æ”¹å˜æ‰§è¡Œä¸Šä¸‹æ–‡ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼ŒA å¯¹è±¡æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œè€Œ B å¯¹è±¡å› ä¸ºæŸç§åŸå› ï¼Œä¹Ÿéœ€è¦ç”¨åˆ°åŒæ ·çš„æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™æ—¶å€™æˆ‘ä»¬æ˜¯å•ç‹¬ä¸º B å¯¹è±¡æ‰©å±•ä¸€ä¸ªæ–¹æ³•å‘¢ï¼Œè¿˜æ˜¯å€Ÿç”¨ä¸€ä¸‹ A å¯¹è±¡çš„æ–¹æ³•å‘¢ï¼Ÿå½“ç„¶æ˜¯å€Ÿç”¨ A å¯¹è±¡çš„å•¦ï¼Œæ—¢å®Œæˆäº†éœ€æ±‚ï¼Œåˆå‡å°‘äº†å†…å­˜çš„å ç”¨ã€‚

å¦å¤–ï¼Œå®ƒä»¬çš„å†™æ³•ä¹Ÿå¾ˆç±»ä¼¼ï¼Œ**è°ƒç”¨ call å’Œ apply çš„å¯¹è±¡ï¼Œå¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•° Function**ã€‚æ¥ä¸‹æ¥ï¼Œå°±ä¼šè¯´åˆ°å…·ä½“çš„å†™æ³•ï¼Œé‚£ä¹Ÿæ˜¯å®ƒä»¬åŒºåˆ«çš„ä¸»è¦ä½“ç°ã€‚

### call å’Œ apply çš„åŒºåˆ«

å®ƒä»¬çš„åŒºåˆ«ï¼Œä¸»è¦ä½“ç°åœ¨å‚æ•°çš„å†™æ³•ä¸Šã€‚å…ˆæ¥çœ‹ä¸€ä¸‹å®ƒä»¬å„è‡ªçš„å…·ä½“å†™æ³•ã€‚

#### call çš„å†™æ³•

```
Function.call(obj,[param1[,param2[,â€¦[,paramN]]]])
```

éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š

- è°ƒç”¨ call çš„å¯¹è±¡ï¼Œå¿…é¡»æ˜¯ä¸ªå‡½æ•° Functionã€‚
- call çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚ Function çš„è°ƒç”¨è€…ï¼Œå°†ä¼šæŒ‡å‘è¿™ä¸ªå¯¹è±¡ã€‚å¦‚æœä¸ä¼ ï¼Œåˆ™é»˜è®¤ä¸ºå…¨å±€å¯¹è±¡ windowã€‚
- ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹ï¼Œå¯ä»¥æ¥æ”¶ä»»æ„ä¸ªå‚æ•°ã€‚æ¯ä¸ªå‚æ•°ä¼šæ˜ å°„åˆ°ç›¸åº”ä½ç½®çš„ Function çš„å‚æ•°ä¸Šã€‚ä½†æ˜¯å¦‚æœå°†æ‰€æœ‰çš„å‚æ•°ä½œä¸ºæ•°ç»„ä¼ å…¥ï¼Œå®ƒä»¬ä¼šä½œä¸ºä¸€ä¸ªæ•´ä½“æ˜ å°„åˆ° Function å¯¹åº”çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸Šï¼Œä¹‹åå‚æ•°éƒ½ä¸ºç©ºã€‚

```
function func (a,b,c) {}

func.call(obj, 1,2,3)
// func æ¥æ”¶åˆ°çš„å‚æ•°å®é™…ä¸Šæ˜¯ 1,2,3

func.call(obj, [1,2,3])
// func æ¥æ”¶åˆ°çš„å‚æ•°å®é™…ä¸Šæ˜¯ [1,2,3],undefined,undefined
```

#### apply çš„å†™æ³•

```
Function.apply(obj[,argArray])
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼š

- å®ƒçš„è°ƒç”¨è€…å¿…é¡»æ˜¯å‡½æ•° Functionï¼Œå¹¶ä¸”åªæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°çš„è§„åˆ™ä¸ call ä¸€è‡´ã€‚
- ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¿…é¡»æ˜¯æ•°ç»„æˆ–è€…ç±»æ•°ç»„ï¼Œå®ƒä»¬ä¼šè¢«è½¬æ¢æˆç±»æ•°ç»„ï¼Œä¼ å…¥ Function ä¸­ï¼Œå¹¶ä¸”ä¼šè¢«æ˜ å°„åˆ° Function å¯¹åº”çš„å‚æ•°ä¸Šã€‚è¿™ä¹Ÿæ˜¯ call å’Œ apply ä¹‹é—´ï¼Œå¾ˆé‡è¦çš„ä¸€ä¸ªåŒºåˆ«ã€‚

```
func.apply(obj, [1,2,3])
// func æ¥æ”¶åˆ°çš„å‚æ•°å®é™…ä¸Šæ˜¯ 1,2,3

func.apply(obj, {
    0: 1,
    1: 2,
    2: 3,
    length: 3
})
// func æ¥æ”¶åˆ°çš„å‚æ•°å®é™…ä¸Šæ˜¯ 1,2,3
```

#### ä»€ä¹ˆæ˜¯ç±»æ•°ç»„ï¼Ÿ

å…ˆè¯´æ•°ç»„ï¼Œè¿™æˆ‘ä»¬éƒ½ç†Ÿæ‚‰ã€‚å®ƒçš„ç‰¹å¾æœ‰ï¼šå¯ä»¥é€šè¿‡è§’æ ‡è°ƒç”¨ï¼Œå¦‚ array[0]ï¼›å…·æœ‰é•¿åº¦å±æ€§lengthï¼›å¯ä»¥é€šè¿‡ for å¾ªç¯æˆ–forEachæ–¹æ³•ï¼Œè¿›è¡Œéå†ã€‚

é‚£ä¹ˆï¼Œç±»æ•°ç»„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯**å…·å¤‡ä¸æ•°ç»„ç‰¹å¾ç±»ä¼¼çš„å¯¹è±¡**ã€‚æ¯”å¦‚ï¼Œä¸‹é¢çš„è¿™ä¸ªå¯¹è±¡ï¼Œå°±æ˜¯ä¸€ä¸ªç±»æ•°ç»„ã€‚

```
let arrayLike = {
    0: 1,
    1: 2,
    2: 3,
    length: 3
};
```

ç±»æ•°ç»„ arrayLike å¯ä»¥é€šè¿‡è§’æ ‡è¿›è¡Œè°ƒç”¨ï¼Œå…·æœ‰lengthå±æ€§ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é€šè¿‡ for å¾ªç¯è¿›è¡Œéå†ã€‚

ç±»æ•°ç»„ï¼Œè¿˜æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ï¼Œåªæ˜¯æˆ‘ä»¬å¹³æ—¶å¯èƒ½æ²¡æ³¨æ„åˆ°ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬è·å– DOM èŠ‚ç‚¹çš„æ–¹æ³•ï¼Œè¿”å›çš„å°±æ˜¯ä¸€ä¸ªç±»æ•°ç»„ã€‚å†æ¯”å¦‚ï¼Œåœ¨ä¸€ä¸ªæ–¹æ³•ä¸­ä½¿ç”¨ arguments è·å–åˆ°çš„æ‰€æœ‰å‚æ•°ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªç±»æ•°ç»„ã€‚

ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼š**ç±»æ•°ç»„æ— æ³•ä½¿ç”¨ forEachã€spliceã€push ç­‰æ•°ç»„åŸå‹é“¾ä¸Šçš„æ–¹æ³•**ï¼Œæ¯•ç«Ÿå®ƒä¸æ˜¯çœŸæ­£çš„æ•°ç»„ã€‚

### call å’Œ apply çš„ç”¨é€”

ä¸‹é¢ä¼šåˆ†åˆ«åˆ—ä¸¾ call å’Œ apply çš„ä¸€äº›ä½¿ç”¨åœºæ™¯ã€‚å£°æ˜ï¼šä¾‹å­ä¸­æ²¡æœ‰å“ªä¸ªåœºæ™¯æ˜¯å¿…é¡»ç”¨ call æˆ–è€…å¿…é¡»ç”¨ apply çš„ï¼Œåªæ˜¯ä¸ªäººä¹ æƒ¯è¿™ä¹ˆç”¨è€Œå·²ã€‚

#### call çš„ä½¿ç”¨åœºæ™¯

**1ã€å¯¹è±¡çš„ç»§æ‰¿**ã€‚å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š

```
function superClass () {
    this.a = 1;
    this.print = function () {
        console.log(this.a);
    }
}

function subClass () {
    superClass.call(this);
    this.print();
}

subClass();
// 1
```

subClass é€šè¿‡ call æ–¹æ³•ï¼Œç»§æ‰¿äº† superClass çš„ print æ–¹æ³•å’Œ a å˜é‡ã€‚æ­¤å¤–ï¼ŒsubClass è¿˜å¯ä»¥æ‰©å±•è‡ªå·±çš„å…¶ä»–æ–¹æ³•ã€‚

**2ã€å€Ÿç”¨æ–¹æ³•**ã€‚è¿˜è®°å¾—åˆšæ‰çš„ç±»æ•°ç»„ä¹ˆï¼Ÿå¦‚æœå®ƒæƒ³ä½¿ç”¨ Array åŸå‹é“¾ä¸Šçš„æ–¹æ³•ï¼Œå¯ä»¥è¿™æ ·ï¼š

```
let domNodes = Array.prototype.slice.call(document.getElementsByTagName("*"));
```

è¿™æ ·ï¼ŒdomNodes å°±å¯ä»¥åº”ç”¨ Array ä¸‹çš„æ‰€æœ‰æ–¹æ³•äº†ã€‚

#### apply çš„ä¸€äº›å¦™ç”¨

**1ã€Math.max**ã€‚ç”¨å®ƒæ¥è·å–æ•°ç»„ä¸­æœ€å¤§çš„ä¸€é¡¹ã€‚

```
let max = Math.max.apply(null, array);
```

åŒç†ï¼Œè¦è·å–æ•°ç»„ä¸­æœ€å°çš„ä¸€é¡¹ï¼Œå¯ä»¥è¿™æ ·ï¼š

```
let min = Math.min.apply(null, array);
```

**2ã€å®ç°ä¸¤ä¸ªæ•°ç»„åˆå¹¶**ã€‚åœ¨ ES6 çš„æ‰©å±•è¿ç®—ç¬¦å‡ºç°ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ Array.prototype.pushæ¥å®ç°ã€‚

```
let arr1 = [1, 2, 3];
let arr2 = [4, 5, 6];

Array.prototype.push.apply(arr1, arr2);
console.log(arr1); // [1, 2, 3, 4, 5, 6]
```

### bind çš„ä½¿ç”¨

æœ€åæ¥è¯´è¯´ bindã€‚åœ¨ MDN ä¸Šçš„è§£é‡Šæ˜¯ï¼šbind() æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œåœ¨è°ƒç”¨æ—¶è®¾ç½® this å…³é”®å­—ä¸ºæä¾›çš„å€¼ã€‚å¹¶åœ¨è°ƒç”¨æ–°å‡½æ•°æ—¶ï¼Œå°†ç»™å®šå‚æ•°åˆ—è¡¨ä½œä¸ºåŸå‡½æ•°çš„å‚æ•°åºåˆ—çš„å‰è‹¥å¹²é¡¹ã€‚

å®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š

```
Function.bind(thisArg[, arg1[, arg2[, ...]]])
```

bind æ–¹æ³• ä¸ apply å’Œ call æ¯”è¾ƒç±»ä¼¼ï¼Œä¹Ÿèƒ½æ”¹å˜å‡½æ•°ä½“å†…çš„ this æŒ‡å‘ã€‚ä¸åŒçš„æ˜¯ï¼Œ**bind æ–¹æ³•çš„è¿”å›å€¼æ˜¯å‡½æ•°ï¼Œå¹¶ä¸”éœ€è¦ç¨åè°ƒç”¨ï¼Œæ‰ä¼šæ‰§è¡Œ**ã€‚è€Œ apply å’Œ call åˆ™æ˜¯ç«‹å³è°ƒç”¨ã€‚

æ¥çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š

```
function add (a, b) {
    return a + b;
}

function sub (a, b) {
    return a - b;
}

add.bind(sub, 5, 3); // è¿™æ—¶ï¼Œå¹¶ä¸ä¼šè¿”å› 8
add.bind(sub, 5, 3)(); // è°ƒç”¨åï¼Œè¿”å› 8
```

å¦‚æœ bind çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ null æˆ–è€… undefinedï¼Œthis å°±æŒ‡å‘å…¨å±€å¯¹è±¡ windowã€‚

#### å®Œæˆäº†è¿™ä¸¤ç‚¹ï¼Œæœ€éš¾çš„éƒ¨åˆ†åˆ°å•¦ï¼å› ä¸º bind è¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯

> ä¸€ä¸ªç»‘å®šå‡½æ•°ä¹Ÿèƒ½ä½¿ç”¨newæ“ä½œç¬¦åˆ›å»ºå¯¹è±¡ï¼šè¿™ç§è¡Œä¸ºå°±åƒæŠŠåŸå‡½æ•°å½“æˆæ„é€ å™¨ã€‚æä¾›çš„ this å€¼è¢«å¿½ç•¥ï¼ŒåŒæ—¶è°ƒç”¨æ—¶çš„å‚æ•°è¢«æä¾›ç»™æ¨¡æ‹Ÿå‡½æ•°ã€‚

ä¹Ÿå°±æ˜¯è¯´å½“ bind è¿”å›çš„å‡½æ•°ä½œä¸ºæ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œbind æ—¶æŒ‡å®šçš„ this å€¼ä¼šå¤±æ•ˆï¼Œä½†ä¼ å…¥çš„å‚æ•°ä¾ç„¶ç”Ÿæ•ˆã€‚ä¸¾ä¸ªä¾‹å­ï¼š

```
var value = 2;

var foo = {
    value: 1
};

function bar(name, age) {
    this.habit = 'shopping';
    console.log(this.value);
    console.log(name);
    console.log(age);
}

bar.prototype.friend = 'kevin';

var bindFoo = bar.bind(foo, 'daisy');

var obj = new bindFoo('18');
// undefined
// daisy
// 18
console.log(obj.habit);
console.log(obj.friend);
// shopping
// kevin
```

æ³¨æ„ï¼šå°½ç®¡åœ¨å…¨å±€å’Œ foo ä¸­éƒ½å£°æ˜äº† value å€¼ï¼Œæœ€åä¾ç„¶è¿”å›äº† undefindï¼Œè¯´æ˜ç»‘å®šçš„ this å¤±æ•ˆäº†ï¼Œå¦‚æœå¤§å®¶äº†è§£ new çš„æ¨¡æ‹Ÿå®ç°ï¼Œå°±ä¼šçŸ¥é“è¿™ä¸ªæ—¶å€™çš„ this å·²ç»æŒ‡å‘äº† objã€‚

### æ€»ç»“

call å’Œ apply çš„ä¸»è¦ä½œç”¨ï¼Œæ˜¯æ”¹å˜å¯¹è±¡çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¹¶ä¸”æ˜¯ç«‹å³æ‰§è¡Œçš„ã€‚å®ƒä»¬åœ¨å‚æ•°ä¸Šçš„å†™æ³•ç•¥æœ‰åŒºåˆ«ã€‚

bind ä¹Ÿèƒ½æ”¹å˜å¯¹è±¡çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå®ƒä¸ call å’Œ apply ä¸åŒçš„æ˜¯ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”éœ€è¦ç¨åå†è°ƒç”¨ä¸€ä¸‹ï¼Œæ‰ä¼šæ‰§è¡Œã€‚



### æ‰‹å†™call

```js
Function.prototype.myCall = function(target, ...args) {
  // this æŒ‡å‘è°ƒç”¨ myCallå‡½æ•°çš„å¯¹è±¡
  if (typeof this !== "function") {
    throw new TypeError("not a function")
  }
  target = target || window
  target.fn = this // éšå¼ç»‘å®šï¼Œæ”¹å˜æ„é€ å‡½æ•°çš„è°ƒç”¨è€…é—´æ¥æ”¹å˜ this æŒ‡å‘
  let result = target.fn(...args)
  return result
};
// æµ‹è¯•
let obj = { name: 123 }
function foo(...args) {
  console.log(this.name, args)
}
let s = foo.myCall(obj, '111', '222')
```



#### æ‰‹å†™apply

```js
Function.prototype.myApply = function(target) {
  if (typeof this !== "function") {
    throw new TypeError("not a function");
  }
  if (!Array.isArray(arguments[1])) {
    throw new Error('arg not a array')
  }
  target = target || window
  target.fn = this
  let args = arguments[1]
  let result = target.fn(args)
  return result
};

const obj = { name: 123 };
function foo(...args) {
  console.log(this.name, args);
}
foo.prototype.name = 123;
const s1 = [1, 2, 3, 4, 5];
const s = foo.myApply(obj,s1);

```




### æ‰‹å†™bind

```js
Function.prototype.myBind = function(target){
    let self = this 

    let args = Array.prototype.slice.call(arguments,1)

    let fNOP = function(){}

    const fBound = function() {
        let bindArgs = Array.prototype.slice.call(arguments)
        return self.apply(this instanceof fNOP ? this:target,args.concat(bindArgs))
    }
    fNOP.prototype = self.prototype
    fBound.prototype = new fNOP()
    return fBound

}

var value = 2;

var foo = {
    value: 1
};

function bar(name, age) {
    this.habit = 'shopping';
    console.log(this.value);
    console.log(name);
    console.log(age);
}

bar.prototype.friend = 'kevin';

var bindFoo = bar.myBind(foo, 'daisy');

var obj = new bindFoo('18');
// undefined
// daisy
// 18
console.log(obj.habit);
console.log(obj.friend);
// shopping
// kevin

```



## 6. newçš„åŸç† 

#### 1.new è¿ç®—ç¬¦åˆ›å»ºä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„å¯¹è±¡ç±»å‹çš„å®ä¾‹æˆ–å…·æœ‰æ„é€ å‡½æ•°çš„å†…ç½®å¯¹è±¡ç±»å‹ä¹‹ä¸€



1. ä»¥æ„é€ å‡½æ•°çš„åŸå‹åˆ›é€ ä¸€ä¸ªå¯¹è±¡
2. å–å‡ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯æˆ‘ä»¬è¦ä¼ å…¥çš„æ„é€ å‡½æ•°ã€‚æ­¤å¤–å› ä¸º shift ä¼šä¿®æ”¹åŸæ•°ç»„ï¼Œæ‰€ä»¥ arguments ä¼šè¢«å»é™¤ç¬¬ä¸€ä¸ªå‚æ•°
3. å°† obj çš„åŸå‹æŒ‡å‘æ„é€ å‡½æ•°ï¼Œè¿™æ · obj å°±å¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°åŸå‹ä¸­çš„å±æ€§
4. ä½¿ç”¨ applyï¼Œæ”¹å˜æ„é€ å‡½æ•° this çš„æŒ‡å‘åˆ°æ–°å»ºçš„å¯¹è±¡ï¼Œè¿™æ · obj å°±å¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°ä¸­çš„å±æ€§
5. è¿”å› obj

#### æ‰‹å†™new

 

```
function objectFactory() {

    var obj = new Object(),

    Constructor = [].shift.call(arguments);

    obj.__proto__ = Constructor.prototype;

    var ret = Constructor.apply(obj, arguments);

    return typeof ret === 'object' ? ret : obj;

};



es6å†™æ³•

function myNew(fn){
	const obj = Object.create(fn.prototype)
	
	args = [].slice.call(arguments,1)
	
	const ret = fn.apply(obj,args)
	
	const isObject = typeof res === 'object' && res !== null;
    const isFunction = typeof res === 'function';

    return isObject || isFunction ? res : obj;
}
```



## 7. å¦‚ä½•æ­£ç¡®åˆ¤æ–­thisï¼Ÿ 

### å½»åº•ææ‡‚ JS ä¸­ this æœºåˆ¶

> æ‘˜è¦ï¼šæœ¬æ–‡å±äºåŸåˆ›ï¼Œæ¬¢è¿è½¬è½½ï¼Œè½¬è½½è¯·ä¿ç•™å‡ºå¤„ï¼šhttps://github.com/jasonGeng88/blog

### ç›®å½•

- this æ˜¯ä»€ä¹ˆ
- this çš„å››ç§ç»‘å®šè§„åˆ™
- ç»‘å®šè§„åˆ™çš„ä¼˜å…ˆçº§
- ç»‘å®šä¾‹å¤–
- æ‰©å±•ï¼šç®­å¤´å‡½æ•°

### this æ˜¯ä»€ä¹ˆ

ç†è§£thisä¹‹å‰ï¼Œ å…ˆçº æ­£ä¸€ä¸ªè§‚ç‚¹ï¼Œ**this æ—¢ä¸æŒ‡å‘å‡½æ•°è‡ªèº«ï¼Œä¹Ÿä¸æŒ‡å‡½æ•°çš„è¯æ³•ä½œç”¨åŸŸ**ã€‚å¦‚æœä»…é€šè¿‡thisçš„è‹±æ–‡è§£é‡Šï¼Œå¤ªå®¹æ˜“äº§ç”Ÿè¯¯å¯¼äº†ã€‚å®ƒå®é™…æ˜¯åœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶æ‰å‘ç”Ÿçš„ç»‘å®šï¼Œä¹Ÿå°±æ˜¯è¯´thiså…·ä½“æŒ‡å‘ä»€ä¹ˆï¼Œå–å†³äºä½ æ˜¯æ€ä¹ˆè°ƒç”¨çš„å‡½æ•°ã€‚

### this çš„å››ç§ç»‘å®šè§„åˆ™

thisçš„4ç§ç»‘å®šè§„åˆ™åˆ†åˆ«æ˜¯ï¼šé»˜è®¤ç»‘å®šã€éšå¼ç»‘å®šã€æ˜¾ç¤ºç»‘å®šã€new ç»‘å®šã€‚ä¼˜å…ˆçº§ä»ä½åˆ°é«˜ã€‚

### é»˜è®¤ç»‘å®š

ä»€ä¹ˆå«é»˜è®¤ç»‘å®šï¼Œå³æ²¡æœ‰å…¶ä»–ç»‘å®šè§„åˆ™å­˜åœ¨æ—¶çš„é»˜è®¤è§„åˆ™ã€‚è¿™ä¹Ÿæ˜¯å‡½æ•°è°ƒç”¨ä¸­æœ€å¸¸ç”¨çš„è§„åˆ™ã€‚

æ¥çœ‹è¿™æ®µä»£ç ï¼š

```
function foo() { 
}       console.log( this.a );

var a = 2; 
foo(); //æ‰“å°çš„æ˜¯ä»€ä¹ˆï¼Ÿ
```

`foo()` æ‰“å°çš„ç»“æœæ˜¯2ã€‚

å› ä¸ºfoo()æ˜¯ç›´æ¥è°ƒç”¨çš„ï¼ˆç‹¬ç«‹å‡½æ•°è°ƒç”¨ï¼‰ï¼Œæ²¡æœ‰åº”ç”¨å…¶ä»–çš„ç»‘å®šè§„åˆ™ï¼Œè¿™é‡Œè¿›è¡Œäº†é»˜è®¤ç»‘å®šï¼Œå°†å…¨å±€å¯¹è±¡ç»‘å®šthisä¸Šï¼Œæ‰€ä»¥this.a å°±è§£ææˆäº†å…¨å±€å˜é‡ä¸­çš„aï¼Œå³2ã€‚

***æ³¨æ„ï¼šåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ˆstrict modeï¼‰ï¼Œå…¨å±€å¯¹è±¡å°†æ— æ³•ä½¿ç”¨é»˜è®¤ç»‘å®šï¼Œå³æ‰§è¡Œä¼šæŠ¥undefinedçš„é”™è¯¯\***

```
function foo() { 
    "use strict";
   console.log( this.a );
}

var a = 2; 
foo(); // Uncaught TypeError: Cannot read property 'a' of undefined
```

------

### éšå¼ç»‘å®š

é™¤äº†ç›´æ¥å¯¹å‡½æ•°è¿›è¡Œè°ƒç”¨å¤–ï¼Œæœ‰äº›æƒ…å†µæ˜¯ï¼Œå‡½æ•°çš„è°ƒç”¨æ˜¯åœ¨æŸä¸ªå¯¹è±¡ä¸Šè§¦å‘çš„ï¼Œå³è°ƒç”¨ä½ç½®ä¸Šå­˜åœ¨ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚

```
function foo() { 
    console.log( this.a );
}

var a = 2;

var obj = { 
    a: 3,
    foo: foo 
};

obj.foo(); // ?
```

`obj.foo()` æ‰“å°çš„ç»“æœæ˜¯3ã€‚

è¿™é‡Œfooå‡½æ•°è¢«å½“åšå¼•ç”¨å±æ€§ï¼Œè¢«æ·»åŠ åˆ°objå¯¹è±¡ä¸Šã€‚è¿™é‡Œçš„è°ƒç”¨è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š

è·å–obj.fooå±æ€§ -> æ ¹æ®å¼•ç”¨å…³ç³»æ‰¾åˆ°fooå‡½æ•°ï¼Œæ‰§è¡Œè°ƒç”¨

æ‰€ä»¥è¿™é‡Œå¯¹fooçš„è°ƒç”¨å­˜åœ¨ä¸Šä¸‹æ–‡å¯¹è±¡objï¼Œthisè¿›è¡Œäº†éšå¼ç»‘å®šï¼Œå³thisç»‘å®šåˆ°äº†objä¸Šï¼Œæ‰€ä»¥this.aè¢«è§£ææˆäº†obj.aï¼Œå³3ã€‚

#### å¤šå±‚è°ƒç”¨é“¾

```
function foo() { 
    console.log( this.a );
}

var a = 2;

var obj1 = { 
    a: 4,
    foo: foo 
};

var obj2 = { 
    a: 3,
    obj1: obj1
};

obj2.obj1.foo(); //?
```

`obj2.obj1.foo()` æ‰“å°çš„ç»“æœæ˜¯4ã€‚

åŒæ ·ï¼Œæˆ‘ä»¬çœ‹ä¸‹å‡½æ•°çš„è°ƒç”¨è¿‡ç¨‹ï¼š

å…ˆè·å–obj2.obj1 -> é€šè¿‡å¼•ç”¨è·å–åˆ°obj1å¯¹è±¡ï¼Œå†è®¿é—® obj1.foo -> æœ€åæ‰§è¡Œfooå‡½æ•°è°ƒç”¨

è¿™é‡Œè°ƒç”¨é“¾ä¸åªä¸€å±‚ï¼Œå­˜åœ¨obj1ã€obj2ä¸¤ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆéšå¼ç»‘å®šå…·ä½“ä¼šç»‘å“ªä¸ªå¯¹è±¡ã€‚è¿™é‡ŒåŸåˆ™æ˜¯è·å–æœ€åä¸€å±‚è°ƒç”¨çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå³obj1ï¼Œæ‰€ä»¥ç»“æœæ˜¾ç„¶æ˜¯4ï¼ˆobj1.aï¼‰ã€‚

#### éšå¼ä¸¢å¤±ï¼ˆå‡½æ•°åˆ«åï¼‰

***æ³¨æ„ï¼šè¿™é‡Œå­˜åœ¨ä¸€ä¸ªé™·é˜±ï¼Œå¤§å®¶åœ¨åˆ†æè°ƒç”¨è¿‡ç¨‹æ—¶ï¼Œè¦ç‰¹åˆ«å°å¿ƒ\***

å…ˆçœ‹ä¸ªä»£ç ï¼š

```
function foo() { 
    console.log( this.a );
}

var a = 2;

var obj = { 
    a: 3,
    foo: foo 
};

var bar = obj.foo;
bar(); //?
```

<font color="red">**`bar()` æ‰“å°çš„ç»“æœæ˜¯2ã€‚**</font>

ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Œobj.foo èµ‹å€¼ç»™barï¼Œé‚£è°ƒç”¨`bar()`ä¸ºä»€ä¹ˆæ²¡æœ‰è§¦å‘éšå¼ç»‘å®šï¼Œä½¿ç”¨çš„æ˜¯é»˜è®¤ç»‘å®šå‘¢ã€‚

è¿™é‡Œæœ‰ä¸ªæ¦‚å¿µè¦ç†è§£æ¸…æ¥šï¼Œobj.foo æ˜¯å¼•ç”¨å±æ€§ï¼Œèµ‹å€¼ç»™barçš„å®é™…ä¸Šå°±æ˜¯fooå‡½æ•°ï¼ˆå³ï¼šbaræŒ‡å‘fooæœ¬èº«ï¼‰ã€‚

é‚£ä¹ˆï¼Œå®é™…çš„è°ƒç”¨å…³ç³»æ˜¯ï¼šé€šè¿‡baræ‰¾åˆ°fooå‡½æ•°ï¼Œè¿›è¡Œè°ƒç”¨ã€‚æ•´ä¸ªè°ƒç”¨è¿‡ç¨‹å¹¶æ²¡æœ‰objçš„å‚æ•°ï¼Œæ‰€ä»¥æ˜¯é»˜è®¤ç»‘å®šï¼Œå…¨å±€å±æ€§aã€‚

#### éšå¼ä¸¢å¤±ï¼ˆå›è°ƒå‡½æ•°ï¼‰

```
function foo() { 
    console.log( this.a );
}

var a = 2;

var obj = { 
    a: 3,
    foo: foo 
};

setTimeout( obj.foo, 100 ); // ï¼Ÿ
```

<font color="red">**æ‰“å°çš„ç»“æœæ˜¯2ã€‚**</font>

åŒæ ·çš„é“ç†ï¼Œè™½ç„¶å‚ä¼ æ˜¯`obj.foo`ï¼Œå› ä¸ºæ˜¯å¼•ç”¨å…³ç³»ï¼Œæ‰€ä»¥ä¼ å‚å®é™…ä¸Šä¼ çš„å°±æ˜¯fooå¯¹è±¡æœ¬èº«çš„å¼•ç”¨ã€‚å¯¹äº`setTimeout`çš„è°ƒç”¨ï¼Œè¿˜æ˜¯ setTimeout -> è·å–å‚æ•°ä¸­fooçš„å¼•ç”¨å‚æ•° -> æ‰§è¡Œ foo å‡½æ•°ï¼Œä¸­é—´æ²¡æœ‰objçš„å‚ä¸ã€‚è¿™é‡Œä¾æ—§è¿›è¡Œçš„æ˜¯é»˜è®¤ç»‘å®šã€‚

------

### æ˜¾ç¤ºç»‘å®š

ç›¸å¯¹éšå¼ç»‘å®šï¼Œthiså€¼åœ¨è°ƒç”¨è¿‡ç¨‹ä¸­ä¼šåŠ¨æ€å˜åŒ–ï¼Œå¯æ˜¯æˆ‘ä»¬å°±æƒ³ç»‘å®šæŒ‡å®šçš„å¯¹è±¡ï¼Œè¿™æ—¶å°±ç”¨åˆ°äº†æ˜¾ç¤ºç»‘å®šã€‚

æ˜¾ç¤ºç»‘å®šä¸»è¦æ˜¯é€šè¿‡æ”¹å˜å¯¹è±¡çš„prototypeå…³è”å¯¹è±¡ï¼Œè¿™é‡Œä¸å±•å¼€è®²ã€‚å…·ä½“ä½¿ç”¨ä¸Šï¼Œå¯ä»¥é€šè¿‡è¿™ä¸¤ä¸ªæ–¹æ³•call(...)æˆ–apply(...)æ¥å®ç°ï¼ˆå¤§å¤šæ•°å‡½æ•°åŠè‡ªå·±åˆ›å»ºçš„å‡½æ•°é»˜è®¤éƒ½æä¾›è¿™ä¸¤ä¸ªæ–¹æ³•ï¼‰ã€‚

***callä¸applyæ˜¯åŒæ ·çš„ä½œç”¨ï¼ŒåŒºåˆ«åªæ˜¯å…¶ä»–å‚æ•°çš„è®¾ç½®ä¸Š\***

```
function foo() { 
    console.log( this.a );
}

var a = 2;

var obj1 = { 
    a: 3,
};

var obj2 = { 
    a: 4,
};
foo.call( obj1 ); // ?
foo.call( obj2 ); // ?
```

æ‰“å°çš„ç»“æœæ˜¯3, 4ã€‚

è¿™é‡Œå› ä¸ºæ˜¾ç¤ºçš„ç”³æ˜äº†è¦ç»‘å®šçš„å¯¹è±¡ï¼Œæ‰€ä»¥thiså°±è¢«ç»‘å®šåˆ°äº†objä¸Šï¼Œæ‰“å°çš„ç»“æœè‡ªç„¶å°±æ˜¯obj1.a å’Œobj2.aã€‚

#### ç¡¬ç»‘å®š

```
function foo() { 
    console.log( this.a );
}

var a = 2;

var obj1 = { 
    a: 3,
};

var obj2 = { 
    a: 4,
};

var bar = function(){
    foo.call( obj1 );
}

bar(); // 3
setTimeout( bar, 100 ); // 3

bar.call( obj2 ); // è¿™æ˜¯å¤šå°‘
```

***å‰é¢ä¸¤ä¸ªï¼ˆå‡½æ•°åˆ«åã€å›è°ƒå‡½æ•°ï¼‰æ‰“å°3ï¼Œå› ä¸ºæ˜¾ç¤ºç»‘å®šäº†ï¼Œæ²¡ä»€ä¹ˆé—®é¢˜ã€‚\***

æœ€åä¸€ä¸ªæ‰“å°æ˜¯3ã€‚

è¿™é‡Œéœ€è¦æ³¨æ„ä¸‹ï¼Œè™½ç„¶barè¢«æ˜¾ç¤ºç»‘å®šåˆ°obj2ä¸Šï¼Œå¯¹äºbarï¼Œfunction(){...} ä¸­çš„thisç¡®å®è¢«ç»‘å®šåˆ°äº†obj2ï¼Œè€Œfooå› ä¸ºé€šè¿‡`foo.call( obj1 )`å·²ç»æ˜¾ç¤ºç»‘å®šäº†obj1ï¼Œæ‰€ä»¥åœ¨fooå‡½æ•°å†…ï¼ŒthisæŒ‡å‘çš„æ˜¯obj1ï¼Œä¸ä¼šå› ä¸ºbarå‡½æ•°å†…æŒ‡å‘obj2è€Œæ”¹å˜è‡ªèº«ã€‚æ‰€ä»¥æ‰“å°çš„æ˜¯obj1.aï¼ˆå³3ï¼‰ã€‚

------

### new ç»‘å®š

***jsä¸­çš„newæ“ä½œç¬¦ï¼Œå’Œå…¶ä»–è¯­è¨€ä¸­ï¼ˆå¦‚JAVAï¼‰çš„newæœºåˆ¶æ˜¯ä¸ä¸€æ ·çš„ã€‚jsä¸­ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°è°ƒç”¨ï¼Œåªæ˜¯è¢«newä¿®é¥°äº†è€Œå·²ã€‚\***

ä½¿ç”¨newæ¥è°ƒç”¨å‡½æ•°ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼š

1. å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å…¶ä»–å¯¹è±¡,é‚£ä¹ˆnewè¡¨è¾¾å¼ä¸­çš„å‡½æ•°è°ƒç”¨ä¼šè‡ªåŠ¨è¿”å›è¿™ä¸ªæ–°å¯¹è±¡ã€‚

ä»ç¬¬ä¸‰ç‚¹å¯ä»¥çœ‹å‡ºï¼ŒthisæŒ‡å‘çš„å°±æ˜¯å¯¹è±¡æœ¬èº«ã€‚

çœ‹ä¸ªä»£ç ï¼š

```
function foo(a) { 
    this.a = a;
}

var a = 2;

var bar1 = new foo(3);
console.log(bar1.a); // ?

var bar2 = new foo(4);
console.log(bar2.a); // ?
```

æœ€åä¸€ä¸ªæ‰“å°æ˜¯3, 4ã€‚

å› ä¸ºæ¯æ¬¡è°ƒç”¨ç”Ÿæˆçš„æ˜¯å…¨æ–°çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åˆä¼šè‡ªåŠ¨ç»‘å®šåˆ°thisä¸Šï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¾è€Œæ˜“è§ã€‚

### ç»‘å®šè§„åˆ™ä¼˜å…ˆçº§

ä¸Šé¢ä¹Ÿè¯´è¿‡ï¼Œè¿™é‡Œåœ¨é‡å¤ä¸€ä¸‹ã€‚ä¼˜å…ˆçº§æ˜¯è¿™æ ·çš„ï¼Œä»¥æŒ‰ç…§ä¸‹é¢çš„é¡ºåºæ¥è¿›è¡Œåˆ¤æ–­:

```
 æ•°æ˜¯å¦åœ¨newä¸­è°ƒç”¨(newç»‘å®š)?å¦‚æœæ˜¯çš„è¯thisç»‘å®šçš„æ˜¯æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚
 æ•°æ˜¯å¦é€šè¿‡callã€apply(æ˜¾å¼ç»‘å®š)æˆ–è€…ç¡¬ç»‘å®šè°ƒç”¨?å¦‚æœæ˜¯çš„è¯,thisç»‘å®šçš„æ˜¯ æŒ‡å®šçš„å¯¹è±¡ã€‚
 æ•°æ˜¯å¦åœ¨æŸä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ä¸­è°ƒç”¨(éšå¼ç»‘å®š)?å¦‚æœæ˜¯çš„è¯,thisç»‘å®šçš„æ˜¯é‚£ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ã€‚
 æœéƒ½ä¸æ˜¯çš„è¯,ä½¿ç”¨é»˜è®¤ç»‘å®šã€‚å¦‚æœåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹,å°±ç»‘å®šåˆ°undefined,å¦åˆ™ç»‘å®šåˆ° å…¨å±€å¯¹è±¡ã€‚
 var bar = foo()
```

### è§„åˆ™ä¾‹å¤–

åœ¨æ˜¾ç¤ºç»‘å®šä¸­ï¼Œå¯¹äºnullå’Œundefinedçš„ç»‘å®šå°†ä¸ä¼šç”Ÿæ•ˆã€‚

ä»£ç å¦‚ä¸‹ï¼š

```
function foo() { 
    console.log( this.a );
}
foo.call( null ); // 2
foo.call( undefined ); // 2
```

è¿™ç§æƒ…å†µä¸»è¦æ˜¯ç”¨åœ¨ä¸å…³å¿ƒthisçš„å…·ä½“ç»‘å®šå¯¹è±¡ï¼ˆç”¨æ¥å¿½ç•¥thisï¼‰ï¼Œè€Œä¼ å…¥nullå®é™…ä¸Šä¼šè¿›è¡Œé»˜è®¤ç»‘å®šï¼Œå¯¼è‡´å‡½æ•°ä¸­å¯èƒ½ä¼šä½¿ç”¨åˆ°å…¨å±€å˜é‡ï¼Œä¸é¢„æœŸä¸ç¬¦ã€‚

æ‰€ä»¥å¯¹äºè¦å¿½ç•¥thisçš„æƒ…å†µï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªç©ºå¯¹è±¡Ã¸ï¼Œè¯¥å¯¹è±¡é€šè¿‡`Object.create(null)`åˆ›å»ºã€‚è¿™é‡Œä¸ç”¨{}çš„åŸå› æ˜¯ï¼ŒÃ¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„ç©ºå¯¹è±¡ï¼Œå®ƒä¸åˆ›å»ºObject.prototypeå§”æ‰˜ï¼Œ{}å’Œæ™®é€šå¯¹è±¡ä¸€æ ·ï¼Œæœ‰åŸå‹é“¾å§”æ‰˜å…³ç³»ã€‚

***1. è¿™é‡Œä¼ nullçš„ä¸€ç§å…·ä½“ä½¿ç”¨åœºæ™¯æ˜¯å‡½æ•°æŸ¯é‡ŒåŒ–çš„ä½¿ç”¨\***

### æ‰©å±•ï¼šç®­å¤´å‡½æ•°

æœ€åï¼Œä»‹ç»ä¸€ä¸‹ES6ä¸­çš„ç®­å¤´å‡½æ•°ã€‚é€šè¿‡â€œ=>â€è€Œä¸æ˜¯functionåˆ›å»ºçš„å‡½æ•°ï¼Œå«åšç®­å¤´å‡½æ•°ã€‚å®ƒçš„thisç»‘å®šå–å†³äºå¤–å±‚ï¼ˆå‡½æ•°æˆ–å…¨å±€ï¼‰ä½œç”¨åŸŸã€‚

### case 1 (æ­£å¸¸è°ƒç”¨)

- æ™®é€šå‡½æ•°

```
function foo(){     
    console.log( this.a );
}

var a = 2;

var obj = { 
    a: 3,
    foo: foo 
};

obj.foo(); //3
```

- ç®­å¤´å‡½æ•°

```
var foo = () => {     
    console.log( this.a );
}

var a = 2;

var obj = { 
    a: 3,
    foo: foo 
};

obj.foo(); //2
foo.call(obj); //2 ï¼Œç®­å¤´å‡½æ•°ä¸­æ˜¾ç¤ºç»‘å®šä¸ä¼šç”Ÿæ•ˆ
```

### case 2 ï¼ˆå‡½æ•°å›è°ƒï¼‰

- æ™®é€šå‡½æ•°

```
function foo(){ 
    return function(){
        console.log( this.a );
    }    
}

var a = 2;

var obj = { 
    a: 3,
    foo: foo 
};

var bar = obj.foo();
bar(); //2
```

- ç®­å¤´å‡½æ•°

```
function foo(){ 
    return () => {
        console.log( this.a );
    }    
}



var a = 2;

var obj = { 
    a: 3,
    foo: foo 
};

var bar = obj.foo();
bar(); //3
```

é€šè¿‡ä¸Šé¢ä¸¤ä¸ªåˆ—å­ï¼Œæˆ‘ä»¬çœ‹åˆ°ç®­å¤´å‡½æ•°çš„thisç»‘å®š<font color="red">**åªå–å†³äºå¤–å±‚ï¼ˆå‡½æ•°æˆ–å…¨å±€ï¼‰çš„ä½œç”¨åŸŸ**</font>ï¼Œå¯¹äºå‰é¢çš„4ç§ç»‘å®šè§„åˆ™æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚å®ƒä¹Ÿæ˜¯ä½œä¸ºthisæœºåˆ¶çš„ä¸€ç§æ›¿æ¢ï¼Œè§£å†³ä¹‹å‰thisç»‘å®šè¿‡ç¨‹å„ç§è§„åˆ™å¸¦æ¥çš„å¤æ‚æ€§ã€‚

***æ³¨æ„ï¼šå¯¹äºES6ä¹‹å‰ï¼Œç®­å¤´å‡½æ•°çš„æ›¿æ¢ç‰ˆæœ¬æ˜¯è¿™æ ·çš„\***

```
// es6
function foo(){ 
    return () => {
        console.log( this.a );
    }   
}

var a = 2;

var obj = { 
    a: 3,
    foo: foo 
};

var bar = obj.foo();
bar(); //3
```

é€šè¿‡ä¸Šé¢ä¸¤ä¸ªåˆ—å­ï¼Œæˆ‘ä»¬çœ‹åˆ°ç®­å¤´å‡½æ•°çš„thisç»‘å®š<font color="red">**åªå–å†³äºå¤–å±‚ï¼ˆå‡½æ•°æˆ–å…¨å±€ï¼‰çš„ä½œç”¨åŸŸ**</font>ï¼Œå¯¹äºå‰é¢çš„4ç§ç»‘å®šè§„åˆ™æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚å®ƒä¹Ÿæ˜¯ä½œä¸ºthisæœºåˆ¶çš„ä¸€ç§æ›¿æ¢ï¼Œè§£å†³ä¹‹å‰thisç»‘å®šè¿‡ç¨‹å„ç§è§„åˆ™å¸¦æ¥çš„å¤æ‚æ€§ã€‚

***æ³¨æ„ï¼šå¯¹äºES6ä¹‹å‰ï¼Œç®­å¤´å‡½æ•°çš„æ›¿æ¢ç‰ˆæœ¬æ˜¯è¿™æ ·çš„\***

```
// es6
function foo(){ 
    return () => {
        console.log( this.a );
    }   
}

// es6ä¹‹å‰çš„æ›¿ä»£æ–¹æ³•
function foo(){ 
     var self = this;
    return () => {
        console.log( self.a );
    }   
}
```

### æ€»ç»“

æˆ‘ä»¬åœ¨ä½¿ç”¨jsçš„è¿‡ç¨‹ä¸­ï¼Œå¯¹äºthisçš„ç†è§£å¾€å¾€è§‰å¾—æ¯”è¾ƒå›°éš¾ï¼Œå†è°ƒè¯•è¿‡ç¨‹ä¸­æœ‰æ—¶ä¹Ÿä¼šå‡ºç°ä¸€äº›ä¸ç¬¦åˆé¢„æœŸçš„ç°è±¡ã€‚å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éƒ½æ˜¯é€šè¿‡ä¸€äº›å˜é€šçš„æ–¹å¼ï¼ˆå¦‚ï¼šä½¿ç”¨å…·ä½“å¯¹è±¡æ›¿æ¢thisï¼‰æ¥è§„é¿çš„é—®é¢˜ã€‚å¯é—®é¢˜ä¸€ç›´å­˜åœ¨é‚£å„¿ï¼Œæˆ‘ä»¬æ²¡æœ‰çœŸæ­£çš„å»ç†è§£å’Œè§£å†³å®ƒã€‚

æœ¬æ–‡ä¸»è¦å‚è€ƒäº†ã€Šä½ ä¸çŸ¥é“çš„JavaScriptï¼ˆä¸Šå·ï¼‰ã€‹ï¼Œå¯¹thisåˆ°åº•æ˜¯ä»€ä¹ˆï¼Œå…·ä½“æ€ä¹ˆç»‘å®šçš„ï¼Œæœ‰ä»€ä¹ˆä¾‹å¤–æƒ…å†µä»¥åŠES6ä¸­çš„ä¸€ä¸ªä¼˜åŒ–æ–¹å‘ï¼Œæ¥å½»åº•ææ¸…æ¥šæˆ‘ä»¬ä¸€ç›´ä½¿ç”¨çš„thisåˆ°åº•æ˜¯æ€ä¹ˆç©çš„ã€‚



## 8. é—­åŒ…åŠå…¶ä½œç”¨ 

é—­åŒ…å±äºä¸€ç§ç‰¹æ®Šçš„ä½œç”¨åŸŸï¼Œç§°ä¸º **é™æ€ä½œç”¨åŸŸ**ã€‚å®ƒçš„å®šä¹‰å¯ä»¥ç†è§£ä¸º: **çˆ¶å‡½æ•°è¢«é”€æ¯** çš„æƒ…å†µä¸‹ï¼Œè¿”å›å‡ºçš„å­å‡½æ•°çš„`[[scope]]`ä¸­ä»ç„¶ä¿ç•™ç€çˆ¶çº§çš„å•å˜é‡å¯¹è±¡å’Œä½œç”¨åŸŸé“¾ï¼Œå› æ­¤å¯ä»¥ç»§ç»­è®¿é—®åˆ°çˆ¶çº§çš„å˜é‡å¯¹è±¡ï¼Œè¿™æ ·çš„å‡½æ•°ç§°ä¸ºé—­åŒ…ã€‚

- é—­åŒ…ä¼šäº§ç”Ÿä¸€ä¸ªå¾ˆç»å…¸çš„é—®é¢˜:
  - å¤šä¸ªå­å‡½æ•°çš„`[[scope]]`éƒ½æ˜¯åŒæ—¶æŒ‡å‘çˆ¶çº§ï¼Œæ˜¯å®Œå…¨å…±äº«çš„ã€‚å› æ­¤å½“çˆ¶çº§çš„å˜é‡å¯¹è±¡è¢«ä¿®æ”¹æ—¶ï¼Œæ‰€æœ‰å­å‡½æ•°éƒ½å—åˆ°å½±å“ã€‚
- è§£å†³:
  - å˜é‡å¯ä»¥é€šè¿‡ **å‡½æ•°å‚æ•°çš„å½¢å¼** ä¼ å…¥ï¼Œé¿å…ä½¿ç”¨é»˜è®¤çš„`[[scope]]`å‘ä¸ŠæŸ¥æ‰¾
  - ä½¿ç”¨`setTimeout`åŒ…è£¹ï¼Œé€šè¿‡ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥
  - ä½¿ç”¨ **å—çº§ä½œç”¨åŸŸ**ï¼Œè®©å˜é‡æˆä¸ºè‡ªå·±ä¸Šä¸‹æ–‡çš„å±æ€§ï¼Œé¿å…å…±äº«





### é¢è¯• | JS é—­åŒ…ç»å…¸ä½¿ç”¨åœºæ™¯å’Œå«é—­åŒ…å¿…åˆ·é¢˜

> **å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ—ä¸€ä¸€ï¼Œä¸‹é¢è¿™ç¯‡æ–‡ç« æ˜¯æœ‰å…³ JS é—­åŒ…æ¦‚å¿µå’Œç»å…¸ä½¿ç”¨åœºæ™¯å’Œå¿…åˆ·é¢˜çš„æ–‡ç« ï¼Œè®©æˆ‘ä»¬å¼€å§‹é˜…è¯»å§ğŸ˜**

### æ€ç»´å¯¼å›¾

![img](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f116c4a9b8e64bbc9706249813a9b743~tplv-k3u1fbpfcp-watermark.image)

### é—­åŒ…

> äº†è§£é—­åŒ…å‰å…ˆæ¥äº†è§£ä¸€ä¸‹ä¸Šçº§ä½œç”¨åŸŸå’Œå †æ ˆå†…å­˜é‡Šæ”¾é—®é¢˜ã€‚

### ä¸Šçº§ä½œç”¨åŸŸçš„æ¦‚å¿µ

- å‡½æ•°çš„ä¸Šçº§ä½œç”¨åŸŸåœ¨å“ªé‡Œåˆ›å»ºåˆ›å»ºçš„ï¼Œä¸Šçº§ä½œç”¨åŸŸå°±æ˜¯è°

```js
var a = 10
function foo(){
    console.log(a)
}

function sum() {
    var a = 20
    foo()
}

sum()
/* è¾“å‡º
    10
/
å¤åˆ¶ä»£ç 
```

> **å‡½æ•° `foo()` æ˜¯åœ¨å…¨å±€ä¸‹åˆ›å»ºçš„ï¼Œæ‰€ä»¥ `a` çš„ä¸Šçº§ä½œç”¨åŸŸå°±æ˜¯ `window`ï¼Œè¾“å‡ºå°±æ˜¯ `10`**

#### æ€è€ƒé¢˜

```js
var n = 10
function fn(){
    var n =20
    function f() {
       n++;
       console.log(n)
     }
    f()
    return f
}

var x = fn()
x()
x()
console.log(n)
/* è¾“å‡º
*  21
    22
    23
    10
/
å¤åˆ¶ä»£ç 
```

> **æ€è·¯ï¼š`fn` çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆå˜é‡ `x` å°±æ˜¯ä»€ä¹ˆï¼Œè¿™é‡Œ `fn` çš„è¿”å›å€¼æ˜¯å‡½æ•°å `f` ä¹Ÿå°±æ˜¯ `f` çš„å †å†…å­˜åœ°å€ï¼Œ`x()` ä¹Ÿå°±æ˜¯æ‰§è¡Œçš„æ˜¯å‡½æ•° `f()`ï¼Œè€Œä¸æ˜¯ `fn()`ï¼Œè¾“å‡ºçš„ç»“æœæ˜¾è€Œæ˜“è§**

- å…³äºå¦‚ä½•æŸ¥æ‰¾ä¸Šçº§ä½œç”¨åŸŸ

> å‚è€ƒï¼š[å½»åº•è§£å†³ JS å˜é‡æå‡çš„é¢è¯•é¢˜](https://juejin.cn/post/6933377315573497864)

### JS å †æ ˆå†…å­˜é‡Šæ”¾

- å †å†…å­˜ï¼šå­˜å‚¨å¼•ç”¨ç±»å‹å€¼ï¼Œå¯¹è±¡ç±»å‹å°±æ˜¯é”®å€¼å¯¹ï¼Œå‡½æ•°å°±æ˜¯ä»£ç å­—ç¬¦ä¸²ã€‚
- å †å†…å­˜é‡Šæ”¾ï¼šå°†å¼•ç”¨ç±»å‹çš„ç©ºé—´åœ°å€å˜é‡èµ‹å€¼æˆ `null`ï¼Œæˆ–æ²¡æœ‰å˜é‡å ç”¨å †å†…å­˜äº†æµè§ˆå™¨å°±ä¼šé‡Šæ”¾æ‰è¿™ä¸ªåœ°å€
- æ ˆå†…å­˜ï¼šæä¾›ä»£ç æ‰§è¡Œçš„ç¯å¢ƒå’Œå­˜å‚¨åŸºæœ¬ç±»å‹å€¼ã€‚
- æ ˆå†…å­˜é‡Šæ”¾ï¼šä¸€èˆ¬å½“å‡½æ•°æ‰§è¡Œå®Œåå‡½æ•°çš„ç§æœ‰ä½œç”¨åŸŸå°±ä¼šè¢«é‡Šæ”¾æ‰ã€‚

> **ä½†æ ˆå†…å­˜çš„é‡Šæ”¾ä¹Ÿæœ‰ç‰¹æ®Šæƒ…å†µï¼šâ‘  å‡½æ•°æ‰§è¡Œå®Œï¼Œä½†æ˜¯å‡½æ•°çš„ç§æœ‰ä½œç”¨åŸŸå†…æœ‰å†…å®¹è¢«æ ˆå¤–çš„å˜é‡è¿˜åœ¨ä½¿ç”¨çš„ï¼Œæ ˆå†…å­˜å°±ä¸èƒ½é‡Šæ”¾é‡Œé¢çš„åŸºæœ¬å€¼ä¹Ÿå°±ä¸ä¼šè¢«é‡Šæ”¾ã€‚â‘¡ å…¨å±€ä¸‹çš„æ ˆå†…å­˜åªæœ‰é¡µé¢è¢«å…³é—­çš„æ—¶å€™æ‰ä¼šè¢«é‡Šæ”¾**

### é—­åŒ…æ˜¯ä»€ä¹ˆ

> åœ¨ JS å¿è€…ç§˜ç±(P90)ä¸­å¯¹é—­åŒ…çš„å®šä¹‰ï¼šé—­åŒ…å…è®¸å‡½æ•°è®¿é—®å¹¶æ“ä½œå‡½æ•°å¤–éƒ¨çš„å˜é‡ã€‚çº¢å®ä¹¦ä¸Šå¯¹äºé—­åŒ…çš„å®šä¹‰ï¼šé—­åŒ…æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦å¤–ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å‡½æ•°ã€‚ MDN å¯¹é—­åŒ…çš„å®šä¹‰ä¸ºï¼šé—­åŒ…æ˜¯æŒ‡é‚£äº›èƒ½å¤Ÿè®¿é—®è‡ªç”±å˜é‡çš„å‡½æ•°ã€‚è¿™é‡Œçš„è‡ªç”±å˜é‡æ˜¯å¤–éƒ¨å‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡ã€‚

> æ¦‚è¿°ä¸Šé¢çš„è¯ï¼Œ**é—­åŒ…æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„å‡½æ•°**

### å½¢æˆé—­åŒ…çš„åŸå› 

> **å†…éƒ¨çš„å‡½æ•°å­˜åœ¨å¤–éƒ¨ä½œç”¨åŸŸçš„å¼•ç”¨å°±ä¼šå¯¼è‡´é—­åŒ…**ã€‚ä»ä¸Šé¢ä»‹ç»çš„ä¸Šçº§ä½œç”¨åŸŸçš„æ¦‚å¿µä¸­å…¶å®å°±æœ‰é—­åŒ…çš„ä¾‹å­ `return f`å°±æ˜¯ä¸€ä¸ªè¡¨ç°å½¢å¼ã€‚

```js
var a = 0
function foo(){
    var b =14
    function fo(){
        console.log(a, b)
    }
    fo()
}
foo()
å¤åˆ¶ä»£ç 
```

> è¿™é‡Œçš„å­å‡½æ•° `fo` å†…å­˜å°±å­˜åœ¨å¤–éƒ¨ä½œç”¨åŸŸçš„å¼•ç”¨ `a, b`ï¼Œæ‰€ä»¥è¿™å°±ä¼šäº§ç”Ÿé—­åŒ…

### é—­åŒ…çš„ä½œç”¨

- ä¿æŠ¤å‡½æ•°çš„ç§æœ‰å˜é‡ä¸å—å¤–éƒ¨çš„å¹²æ‰°ã€‚å½¢æˆä¸é”€æ¯çš„æ ˆå†…å­˜ã€‚
- ä¿å­˜ï¼ŒæŠŠä¸€äº›å‡½æ•°å†…çš„å€¼ä¿å­˜ä¸‹æ¥ã€‚é—­åŒ…å¯ä»¥å®ç°æ–¹æ³•å’Œå±æ€§çš„ç§æœ‰åŒ–

### é—­åŒ…ç»å…¸ä½¿ç”¨åœºæ™¯

- 1. `return` å›ä¸€ä¸ªå‡½æ•°

```js
var n = 10
function fn(){
    var n =20
    function f() {
       n++;
       console.log(n)
     }
    return f
}

var x = fn()
x() // 21
å¤åˆ¶ä»£ç 
```

> è¿™é‡Œçš„ return `f`, `f()`å°±æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œå­˜åœ¨ä¸Šçº§ä½œç”¨åŸŸçš„å¼•ç”¨ã€‚

- 1. å‡½æ•°ä½œä¸ºå‚æ•°

```js
var a = 'æ—ä¸€ä¸€'
function foo(){
    var a = 'foo'
    function fo(){
        console.log(a)
    }
    return fo
}

function f(p){
    var a = 'f'
    p()
}
f(foo())
/* è¾“å‡º
*   foo
/ 
å¤åˆ¶ä»£ç 
```

> ä½¿ç”¨ return `fo` è¿”å›å›æ¥ï¼Œ`fo()` å°±æ˜¯é—­åŒ…ï¼Œ`f(foo())` æ‰§è¡Œçš„å‚æ•°å°±æ˜¯å‡½æ•° `fo`ï¼Œå› ä¸º `fo() ä¸­çš„ a` çš„ä¸Šçº§ä½œç”¨åŸŸå°±æ˜¯å‡½æ•°`foo()`ï¼Œæ‰€ä»¥è¾“å‡ºå°±æ˜¯`foo`

- 1. IIFEï¼ˆè‡ªæ‰§è¡Œå‡½æ•°ï¼‰

```js
var n = 'æ—ä¸€ä¸€';
(function p(){
    console.log(n)
})()
/* è¾“å‡º
*   æ—ä¸€ä¸€
/ 
å¤åˆ¶ä»£ç 
```

> åŒæ ·ä¹Ÿæ˜¯äº§ç”Ÿäº†é—­åŒ…`p()`ï¼Œå­˜åœ¨ `window`ä¸‹çš„å¼•ç”¨ `n`ã€‚

- 1. å¾ªç¯èµ‹å€¼

```js
for(var i = 0; i<10; i++){
  (function(j){
       setTimeout(function(){
        console.log(j)
    }, 1000) 
  })(i)
}
å¤åˆ¶ä»£ç 
```

> å› ä¸ºå­˜åœ¨é—­åŒ…çš„åŸå› ä¸Šé¢èƒ½ä¾æ¬¡è¾“å‡º1~10ï¼Œé—­åŒ…å½¢æˆäº†10ä¸ªäº’ä¸å¹²æ‰°çš„ç§æœ‰ä½œç”¨åŸŸã€‚å°†å¤–å±‚çš„è‡ªæ‰§è¡Œå‡½æ•°å»æ‰åå°±ä¸å­˜åœ¨å¤–éƒ¨ä½œç”¨åŸŸçš„å¼•ç”¨äº†ï¼Œè¾“å‡ºçš„ç»“æœå°±æ˜¯è¿ç»­çš„ 10ã€‚ä¸ºä»€ä¹ˆä¼šè¿ç»­è¾“å‡º10ï¼Œå› ä¸º JS æ˜¯å•çº¿ç¨‹çš„é‡åˆ°å¼‚æ­¥çš„ä»£ç ä¸ä¼šå…ˆæ‰§è¡Œ(ä¼šå…¥æ ˆ)ï¼Œç­‰åˆ°åŒæ­¥çš„ä»£ç æ‰§è¡Œå®Œ `i++` åˆ° 10æ—¶ï¼Œå¼‚æ­¥ä»£ç æ‰å¼€å§‹æ‰§è¡Œæ­¤æ—¶çš„ `i=10` è¾“å‡ºçš„éƒ½æ˜¯ 10ã€‚

- 1. ä½¿ç”¨å›è°ƒå‡½æ•°å°±æ˜¯åœ¨ä½¿ç”¨é—­åŒ…

```js
window.name = 'æ—ä¸€ä¸€'
setTimeout(function timeHandler(){
  console.log(window.name);
}, 100)
å¤åˆ¶ä»£ç 
```

### ä½¿ç”¨é—­åŒ…éœ€è¦æ³¨æ„ä»€ä¹ˆ

> å®¹æ˜“å¯¼è‡´å†…å­˜æ³„æ¼ã€‚é—­åŒ…ä¼šæºå¸¦åŒ…å«å…¶å®ƒçš„å‡½æ•°ä½œç”¨åŸŸï¼Œå› æ­¤ä¼šæ¯”å…¶ä»–å‡½æ•°å ç”¨æ›´å¤šçš„å†…å­˜ã€‚è¿‡åº¦ä½¿ç”¨é—­åŒ…ä¼šå¯¼è‡´å†…å­˜å ç”¨è¿‡å¤šï¼Œæ‰€ä»¥è¦è°¨æ…ä½¿ç”¨é—­åŒ…ã€‚

### ç»å…¸é¢è¯•é¢˜

- for å¾ªç¯å’Œé—­åŒ…(å·ç§°å¿…åˆ·é¢˜)

```js
var data = [];

for (var i = 0; i < 3; i++) {
  data[i] = function () {
    console.log(i);
  };
}

data[0]();
data[1]();
data[2]()
/* è¾“å‡º
    3
    3
    3
/
å¤åˆ¶ä»£ç 
```

> è¿™é‡Œçš„ `i` æ˜¯å…¨å±€ä¸‹çš„ `i`ï¼Œå…±ç”¨ä¸€ä¸ªä½œç”¨åŸŸï¼Œå½“å‡½æ•°è¢«æ‰§è¡Œçš„æ—¶å€™è¿™æ—¶çš„ `i=3`ï¼Œå¯¼è‡´è¾“å‡ºçš„ç»“æ„éƒ½æ˜¯3ã€‚

- ä½¿ç”¨é—­åŒ…æ”¹å–„ä¸Šé¢çš„å†™æ³•è¾¾åˆ°é¢„æœŸæ•ˆæœï¼Œå†™æ³•1ï¼šè‡ªæ‰§è¡Œå‡½æ•°å’Œé—­åŒ…

```js
var data = [];

for (var i = 0; i < 3; i++) {
    (function(j){
      setTimeout( data[j] = function () {
        console.log(j);
      }, 0)
    })(i)
}

data[0]();
data[1]();
data[2]()
å¤åˆ¶ä»£ç 
```

- å†™æ³•2ï¼šä½¿ç”¨ `let`

```js
var data = [];

for (let i = 0; i < 3; i++) {
  data[i] = function () {
    console.log(i);
  };
}

data[0]();
data[1]();
data[2]()
å¤åˆ¶ä»£ç 
```

> `let` å…·æœ‰å—çº§ä½œç”¨åŸŸï¼Œå½¢æˆçš„3ä¸ªç§æœ‰ä½œç”¨åŸŸéƒ½æ˜¯äº’ä¸å¹²æ‰°çš„ã€‚

## 9. åŸå‹å’ŒåŸå‹é“¾ 

## 10. prototypeä¸__proto__çš„å…³ç³»ä¸åŒºåˆ« 

## 11. ç»§æ‰¿çš„å®ç°æ–¹å¼åŠæ¯”è¾ƒ 

## 12. æ·±æ‹·è´ä¸æµ…æ‹·è´ 

## 13. é˜²æŠ–å’ŒèŠ‚æµ 

## 14. ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾ã€æ‰§è¡ŒæœŸä¸Šä¸‹æ–‡ 

## 15. DOMå¸¸è§çš„æ“ä½œæ–¹å¼ 

## 16. Array.sort()æ–¹æ³•ä¸å®ç°æœºåˆ¶ 

## 17. Ajaxçš„è¯·æ±‚è¿‡ç¨‹ 

## 18. JSçš„åƒåœ¾å›æ”¶æœºåˆ¶ 

## 19. JSä¸­çš„Stringã€Arrayå’ŒMathæ–¹æ³• 

## 20. addEventListenerå’ŒonClick()çš„åŒºåˆ« 

## 21. newå’ŒObject.createçš„åŒºåˆ« 

## 22. DOMçš„locationå¯¹è±¡ 

## 23. æµè§ˆå™¨ä»è¾“å…¥URLåˆ°é¡µé¢æ¸²æŸ“çš„æ•´ä¸ªæµç¨‹ï¼ˆæ¶‰åŠåˆ°è®¡ç®—æœºç½‘ç»œæ•°æ®ä¼ è¾“è¿‡ç¨‹ã€æµè§ˆå™¨è§£ææ¸²æŸ“è¿‡ç¨‹ï¼‰ 

## 24. è·¨åŸŸã€åŒæºç­–ç•¥åŠè·¨åŸŸå®ç°æ–¹å¼å’ŒåŸç† 

## 25. æµè§ˆå™¨çš„å›æµï¼ˆReflowï¼‰å’Œé‡ç»˜ï¼ˆRepaintsï¼‰ 

## 26. [JavaScript]()ä¸­çš„arguments 

## 27. EventLoopäº‹ä»¶å¾ªç¯ 

## 28. å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡ 

## 29. BOMå±æ€§å¯¹è±¡æ–¹æ³• 

## 30. å‡½æ•°æŸ¯é‡ŒåŒ–åŠå…¶é€šç”¨å°è£… 

## 31.js mapå’Œreduceæ–¹æ³•

## 32.==å’Œ===çš„åŒºåˆ«

## 33.settimeoutä½œç”¨äºå€’è®¡æ—¶ä¸ºä»€ä¹ˆæœ‰è¯¯å·®

#  äºŒã€ES6 

1. letã€constå’Œvarçš„æ¦‚å¿µä¸åŒºåˆ« 
2. å˜é‡æå‡ä¸æš‚æ—¶æ€§æ­»åŒº 
3. å˜é‡çš„ç»“æ„èµ‹å€¼ 
4. ç®­å¤´å‡½æ•°åŠå…¶thisé—®é¢˜ 
5. Symbolæ¦‚å¿µåŠå…¶ä½œç”¨ 
6. Setå’ŒMapæ•°æ®ç»“æ„ 
7. Proxy 
8. Reflectå¯¹è±¡ 
9. Promiseï¼ˆæ‰‹æ’•Promise A+è§„èŒƒã€Promise.allã€Promiseç›¸å…³APIå’Œæ–¹æ³•ï¼‰ 
10. Iteratorå’Œfor...ofï¼ˆIteratoréå†å™¨çš„å®ç°ï¼‰ 
11. å¾ªç¯è¯­æ³•æ¯”è¾ƒåŠä½¿ç”¨åœºæ™¯ï¼ˆforã€forEachã€for...inã€for...ofï¼‰ 
12. GeneratoråŠå…¶å¼‚æ­¥æ–¹é¢çš„åº”ç”¨ 
13. asyncå‡½æ•° 
14. å‡ ç§å¼‚æ­¥æ–¹å¼çš„æ¯”è¾ƒï¼ˆå›è°ƒã€setTimeoutã€Promiseã€Generatorã€asyncï¼‰ 
15. classåŸºæœ¬è¯­æ³•åŠç»§æ‰¿ 
16. æ¨¡å—åŠ è½½æ–¹æ¡ˆæ¯”è¾ƒï¼ˆCommonJSå’ŒES6çš„Moduleï¼‰ 
17. ES6æ¨¡å—åŠ è½½ä¸CommonJSåŠ è½½çš„åŸç† 

#  ä¸‰ã€HTML/CSS 

1. CSSæƒé‡åŠå…¶å¼•å…¥æ–¹å¼ 
2. <a></a>æ ‡ç­¾å…¨éƒ¨ä½œç”¨ 
3. ç”¨CSSç”»ä¸‰è§’å½¢ 
4. æœªçŸ¥å®½é«˜å…ƒç´ æ°´å¹³å‚ç›´å±…ä¸­ï¼ˆæ–¹æ¡ˆåŠæ¯”è¾ƒï¼‰ 
5. å…ƒç´ ç§ç±»çš„åˆ’åˆ† 
6. ç›’å­æ¨¡å‹åŠå…¶ç†è§£ 
7. å®šä½æ–¹å¼åŠå…¶åŒºåˆ«ï¼ˆæ–‡æ¡£æµï¼‰ 
8. marginå¡Œé™·åŠåˆå¹¶é—®é¢˜ 
9. æµ®åŠ¨æ¨¡å‹åŠæ¸…é™¤æµ®åŠ¨çš„æ–¹æ³• 
10. CSSå®šä½å±æ€§ 
11. displayåŠç›¸å…³å±æ€§ 
12. IFCä¸BFC 
13. åœ£æ¯å¸ƒå±€å’ŒåŒé£ç¿¼å¸ƒå±€çš„å®ç° 
14. Flexå¸ƒå±€ 
15. pxã€emã€remçš„åŒºåˆ« 
16. Lessé¢„å¤„ç†è¯­è¨€ 
17. åª’ä½“æŸ¥è¯¢ 
18. vhä¸vw 
19. H5çš„è¯­ä¹‰åŒ–ä½œç”¨åŠè¯­ä¹‰åŒ–æ ‡ç­¾ 
20. Web Workerå’ŒWeb Socket 
21. CSS3åŠç›¸å…³åŠ¨ç”» 
22. å¦‚ä½•å®ç°å“åº”å¼å¸ƒå±€ 
23. SEOçš„æ¦‚å¿µåŠå®ç° 
24. HTML5çš„æ–°ç‰¹æ€§ 
25. Lesså’ŒSassä½¿ç”¨ 

#  å››ã€HTTPä¸è®¡ç®—æœºç½‘ç»œ 

### 1.TCP/IPåè®®åˆ†å±‚ç®¡ç† 

### 2.ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹æœºåˆ¶åŠåŸå›  

### 3.HTTPæ–¹æ³• 

### 4.GETå’ŒPOSTçš„åŒºåˆ« 

### 5.HTTPå»ºç«‹æŒä¹…è¿æ¥çš„æ„ä¹‰ 

### 6.HTTPæŠ¥æ–‡çš„ç»“æ„ 

### 7.HTTPçŠ¶æ€ç  

### 8.WebæœåŠ¡å™¨åŠå…¶ç»„æˆ 

### 9.HTTPæŠ¥æ–‡é¦–éƒ¨ 

### 10.HTTPé€šç”¨é¦–éƒ¨å­—æ®µ 

### 11.HTTPè¯·æ±‚é¦–éƒ¨å­—æ®µã€å“åº”é¦–éƒ¨å­—æ®µã€å®ä½“é¦–éƒ¨å­—æ®µ 

### 12.Cookieç›¸å…³é¦–éƒ¨å­—æ®µ 

### 13.HTTPSä¸HTTPåŒºåˆ«åŠå®ç°æ–¹å¼ 

### 14.Cookieä¸Session 

### 15.åŸºäºHTTPçš„åŠŸèƒ½è¿½åŠ åè®®ï¼ˆSPYã€WebSocketã€HTTPï¼‰ 

### 16.å¸¸è§çš„Webæ”»å‡»åˆ†ç±» 

### 17.TCPä¸UDPåŒºåˆ« 

### 18.å­˜å‚¨æœºåˆ¶localStorageã€sessionStorageä¸Cookieå­˜å‚¨æŠ€æœ¯ 

### 19.XSSæ”»å‡»åŠé˜²å¾¡ 

### 20.CSRFæ”»å‡»åŠé˜²å¾¡

### 21.ä»æµè§ˆå™¨åœ°å€æ è¾“å…¥urlåˆ°è¯·æ±‚è¿”å›å‘ç”Ÿäº†ä»€ä¹ˆ

#### 1.é¦–å…ˆä¼šè¿›è¡Œ url è§£æï¼Œæ ¹æ® dns ç³»ç»Ÿè¿›è¡Œ ip æŸ¥æ‰¾ã€‚**

##### é—®dnsè§£ææµç¨‹ï¼Œå¹¶ä¸”htmlå¦‚ä½•åšdnsä¼˜åŒ–

é¦–å…ˆdnsè¿™ä¸ªå±äºå¾ˆä¹…ä»¥å‰åœ¨è®¡ç®—æœºç½‘ç»œè°¢å¸Œä»ç‰ˆçœ‹åˆ°è¿‡äº†ï¼Œæœ‰ä¸€äº›ç»†èŠ‚å¿˜äº†ï¼Œä½†æ˜¯å¤§è‡´æµç¨‹æ˜¯è®°å¾—çš„ã€‚æ¯”å¦‚è¯´æŸ¥è¯¢ä¸€ä¸ªç½‘å€ä¸ºï¼š[www.baidu.com](https://link.juejin.cn/?target=http%3A%2F%2Fwww.baidu.com)

0ã€å…ˆæ‰¾æµè§ˆå™¨ç¼“å­˜

1ã€å™¨ä¸­è¾“å…¥[www.baidu.com](https://link.juejin.cn/?target=https%3A%2F%2Fwww.baidu.com) åŸŸåï¼Œæ“ä½œç³»ç»Ÿä¼šå…ˆæŸ¥hostsä»¶æ˜¯å¦æœ‰è®°å½•ï¼Œæœ‰çš„è¯å°±ä¼šæŠŠç›¸å¯¹åº”æ˜ å°„çš„IPè¿”å›ã€‚//å…ˆæ‰¾æµè§ˆå™¨ç¼“å­˜

2ã€hostsæ–‡ä»¶æ²¡æœ‰å°±å»æŸ¥æœ¬åœ°dnsè§£æå™¨æœ‰æ²¡æœ‰ç¼“å­˜ã€‚ï¼ˆè¿™ä¸ªæˆ‘æ²¡ç­”ä¸Šæ¥ï¼‰

3ã€ç„¶åå°±å»æ‰¾æˆ‘ä»¬è®¡ç®—æœºä¸Šé…ç½®çš„dnsæœåŠ¡å™¨ä¸Šæœ‰æˆ–è€…æœ‰ç¼“å­˜ï¼Œå°±è¿”å›

4ã€è¿˜æ²¡æœ‰çš„è¯å°±å»æ‰¾æ ¹DNSæœåŠ¡å™¨(å…¨çƒ13å°ï¼Œå›ºå®šipåœ°å€)ï¼Œç„¶ååˆ¤æ–­.comåŸŸåæ˜¯å“ªä¸ªæœåŠ¡å™¨ç®¡ç†ï¼Œå¦‚æœæ— æ³•è§£æï¼Œå°±æŸ¥æ‰¾.baidu.comæœåŠ¡å™¨æ˜¯å¦èƒ½è§£æï¼Œç›´åˆ°æŸ¥åˆ°www.baidu.comçš„IPåœ°å€

æ³¨:åé¢æŸ¥èµ„æ–™æ‰å‘ç°dnsæŸ¥è¯¢æœ‰ä¸¤ç§æ¨¡å¼ï¼Œä¸€ç§æ˜¯è½¬å‘æ¨¡å¼ï¼Œä¸€ç§æ˜¯éè½¬å‘æ¨¡å¼ï¼Œæˆ‘ä¸Šé¢è¯´çš„4æ˜¯éè½¬å‘æ¨¡å¼ã€‚

å‰ç«¯çš„dnsä¼˜åŒ–ï¼Œå¯ä»¥åœ¨htmlé¡µé¢å¤´éƒ¨å†™å…¥dnsç¼“å­˜åœ°å€ï¼Œæ¯”å¦‚

```
<meta http-equiv="x-dns-prefetch-control" content="on" />
<link rel="dns-prefetch" href="http://bdimg.share.baidu.com" />
å¤åˆ¶ä»£ç 
```

ç»ˆäºæŠ—è¿‡äº†ç¬¬ä¸€è½®çš„çŒ›é—®ï¼Œæ¥ç€æˆ‘ç»§ç»­è¯´ä»æµè§ˆå™¨åœ°å€æ è¾“å…¥urlåˆ°è¯·æ±‚è¿”å›å‘ç”Ÿäº†ä»€ä¹ˆ

#### 2.

#  äº”ã€[å‰ç«¯]()å·¥ç¨‹åŒ– 

1. [å‰ç«¯]()å·¥ç¨‹åŒ–çš„æµç¨‹ï¼ˆæ¶æ„é€‰å‹ã€ä¸šåŠ¡å¼€å‘ã€æµ‹è¯•ã€æ‰“åŒ…æ„å»ºã€éƒ¨ç½²ä¸Šçº¿ã€[é¡¹ç›®]()ç›‘æ§ï¼‰
2. WebpackåŸºæœ¬æ¦‚å¿µä¸é…ç½® 
3. loaderä¸pluginåŸç†ä¸å®ç° 
4. Webpackçš„æ¨¡å—çƒ­æ›¿æ¢åŠå®ç° 
5. Webpackçš„ä¼˜åŒ–é—®é¢˜ 
6. SPAåŠå…¶ä¼˜ç¼ºç‚¹ 
7. SSRå®ç°åŠä¼˜ç¼ºç‚¹ 
8. è®¾è®¡æ¨¡å¼ï¼ˆå·¥å‚æ¨¡å¼ã€å•ä¾‹æ¨¡å¼ã€åŸå‹æ¨¡å¼ã€***æ¨¡å¼ã€é€‚é…å™¨æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ç­‰...ï¼‰ 

#  å…­ã€Vue



#  ä¸ƒã€NodeJS 

1. NodeJSåŸºæœ¬æ¦‚å¿µä¸ç‰¹ç‚¹ 
2. CommonJSè§„èŒƒã€æ ¸å¿ƒæ¨¡å— 
3. Nodeçš„å¼‚æ­¥I/O 
4. Nodeçš„å†…å­˜æ§åˆ¶ 
5. Nodeæ„å»ºç½‘ç»œæœåŠ¡ï¼ˆTCPã€HTTPã€Web SocketæœåŠ¡ç­‰ï¼‰ 
6. Nodeçš„è¿›ç¨‹ 

#  å…«ã€éœ€è¦ä¼šæ‰‹æ’•çš„ä»£ç éƒ¨åˆ† 

1. Promiseï¼ˆA+è§„èŒƒï¼‰ã€thenã€allæ–¹æ³• 
2. Iteratoréå†å™¨å®ç° 
3. Thunkå‡½æ•°å®ç°ï¼ˆç»“åˆGeneratorå®ç°å¼‚æ­¥ï¼‰ 
4. asyncå®ç°åŸç†ï¼ˆspawnå‡½æ•°ï¼‰ 
5. classçš„ç»§æ‰¿ 
6. é˜²æŠ–å’ŒèŠ‚æµ 
7. AjaxåŸç”Ÿå®ç° 
8. æ·±æ‹·è´çš„å‡ ç§æ–¹æ³•ä¸æ¯”è¾ƒ 
9. ç»§æ‰¿çš„å‡ ç§å®ç°ä¸æ¯”è¾ƒ 
10. æœªçŸ¥å®½é«˜çš„å…ƒç´ æ°´å¹³å‚ç›´å±…ä¸­ 
11. ä¸‰æ å¸ƒå±€çš„å®ç° 
12. ä¸¤æ å¸ƒå±€çš„å®ç° 
13. Reacté«˜é˜¶ç»„ä»¶ 
14. æ•°ç»„å»é‡ 
15. å‡ ç§[æ’åº]()[ç®—æ³•]()çš„å®ç°åŠå…¶å¤æ‚åº¦æ¯”è¾ƒ
16. å‰åºååºéå†[äºŒå‰æ ‘]()ï¼ˆéé€’å½’ï¼‰
17. [äºŒå‰æ ‘]()æ·±åº¦éå†ï¼ˆåˆ†ææ—¶é—´å¤æ‚åº¦ï¼‰
18. è·¨åŸŸçš„å®ç°ï¼ˆJSONPã€CORSï¼‰ 

#  ä¹ã€æ•°æ®å¯è§†åŒ– 

1. Canvaså’ŒSVGçš„åŒºåˆ« 
2. åœ¨è€ƒè™‘è®¾è®¡å¯è§†åŒ–å›¾è¡¨æ—¶ï¼Œç»“åˆCanvaså’ŒSVGç‰¹æ€§ä¼šæ€ä¹ˆå–èˆ 
3. å¸¸è§çš„å¯è§†åŒ–ç»„ä»¶åº“ 
4. å¯è§†åŒ–ç»„ä»¶åº“å¦‚Echartsçš„è®¾è®¡æ€è·¯ 
5. ä¸€äº›åå‘åº•å±‚çš„å¯è§†åŒ–ç»„ä»¶åº“å’Œ[å‰ç«¯]()æ¡†æ¶ç»“åˆæ–¹é¢éœ€è¦è€ƒè™‘å“ªäº›é—®é¢˜
6. å¯è§†åŒ–ç»„ä»¶å¦‚ä½•åšåˆ°æ•°æ®é©±åŠ¨ï¼Ÿ 

#  åã€è®¡ç®—æœºåŸºç¡€ 

1. è®¡ç®—æœºç³»ç»Ÿ 
2. çº¿ç¨‹ä¸è¿›ç¨‹ 
3. å¸¸è§çš„gitæŒ‡ä»¤ 
4. Linuxç›¸å…³æŒ‡ä»¤ 
5. å…¶ä»–ç±»å‹çš„ç¼–ç¨‹è¯­è¨€ï¼ˆå¦‚Javaï¼‰ 
6. æ•°æ®åº“